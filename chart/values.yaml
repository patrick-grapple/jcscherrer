# Default values for myapp.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.


env: {}
# configuration for grapple ApplicationSet (gras)
gras-deploy:
  enabled: true
  gras: {}
  grapi:
    # beimagetag: "v0.130"
    automigrate: false
    discoveredrepos: true
    ingress: true
    ssl: true
    sslissuer: letsencrypt-grapple-demo
    externalsecrets:
      - name: "classicmodelsas-auroramysql"
        spec:
          refreshInterval: 1h
          secretStoreRef:
            name: aws-secretstore
            kind: ClusterSecretStore
          target:
            name: auroramysql
            creationPolicy: Owner
          dataFrom:
            - extract:
                key: cloud20x/rds/auroramysql
      - name: "jcscherrer-bexio"
        spec:
          refreshInterval: 1h
          secretStoreRef:
            name: aws-secretstore
            kind: ClusterSecretStore
          target:
            name: jcscherrer-bexio
            creationPolicy: Owner
          dataFrom:
            - extract:
                key: cloud20x/jcscherrer/bexionop
    datasources:
      - name: jcscherrer
        spec:
          mysql:
            database: jcscherrer
            host: $(host)
            name: jcscherrer
            password: $(password)
            port: $(port)
            url: ""
            user: $(username)
    discoveries:
      - name: jcscherrer
        spec:
          all: true
          dataSource: jcscherrer
          disableCamelCase: false
          schema: jcscherrer
    relations:
      - name: trainer
        spec:
          destinationModel: Trainer
          foreignKeyName: trainerId
          registerInclusionResolver: true
          relationName: trainer
          relationType: belongsTo
          sourceModel: Rapport
      - name: platz
        spec:
          destinationModel: Platz
          foreignKeyName: platzId
          registerInclusionResolver: true
          relationName: platz
          relationType: belongsTo
          sourceModel: Rapport
      - name: kunde
        spec:
          destinationModel: Kunde
          foreignKeyName: kundeId
          registerInclusionResolver: true
          relationName: kunde
          relationType: belongsTo
          sourceModel: Rapport
      - name: gruppe
        spec:
          destinationModel: Gruppe
          foreignKeyName: gruppeId
          registerInclusionResolver: true
          relationName: gruppe
          relationType: belongsTo
          sourceModel: Rapport
      - name: invoice
        spec:
          destinationModel: Invoices
          foreignKeyName: rapportId
          registerInclusionResolver: true
          relationName: invoice
          relationType: hasMany
          sourceModel: Rapport
      - name: trainerarchived
        spec:
          destinationModel: Trainer
          foreignKeyName: trainerId
          registerInclusionResolver: true
          relationName: trainerarchived
          relationType: belongsTo
          sourceModel: ArchivedRapport
      - name: platzarchived
        spec:
          destinationModel: Platz
          foreignKeyName: platzId
          registerInclusionResolver: true
          relationName: platzarchived
          relationType: belongsTo
          sourceModel: ArchivedRapport
      - name: kundearchived
        spec:
          destinationModel: Kunde
          foreignKeyName: kundeId
          registerInclusionResolver: true
          relationName: kundearchived
          relationType: belongsTo
          sourceModel: ArchivedRapport
      - name: gruppearchived
        spec:
          destinationModel: Gruppe
          foreignKeyName: gruppeId
          registerInclusionResolver: true
          relationName: gruppearchived
          relationType: belongsTo
          sourceModel: ArchivedRapport
      - name: invoicearchived
        spec:
          destinationModel: Invoices
          foreignKeyName: rapportId
          registerInclusionResolver: true
          relationName: invoicearchived
          relationType: hasMany
          sourceModel: ArchivedRapport
      - name: SummerRateBefore
        spec:
          destinationModel: Product
          foreignKeyName: SummerRateBeforeId
          registerInclusionResolver: true
          relationName: SummerRateBefore
          relationType: belongsTo
          sourceModel: Trainer
      - name: KUNDE
        content: '{"relationName": "KUNDE", "customReferenceKeys":true, "sourceModel": "Kunde","customSourceModelKey":"bexioId","destinationModel":"Kunde","customTargetModelKey":"bexioId","throughModel":"KundeThrough","relationType":"hasManyThrough","sourceKeyOnThrough":"contactId","targetKeyOnThrough":"contactSubId","registerInclusionResolver":true}'
        # spec:
        #   destinationModel: "Kunde"
        #   registerInclusionResolver: true
        #   customReferenceKeys: "true"
        #   customSourceModelKey: "bexioId"
        #   customTargetModelKey: "bexioId"
        #   relationName: KUNDE
        #   relationType: hasManyThrough
        #   throughModel: "KundeThrough"
        #   sourceModel: Kunde
        #   sourceKeyOnThrough: "contactId"
        #   targetKeyOnThrough: "contactSubId"
      - name: rapport
        spec:
          destinationModel: Rapport
          foreignKeyName: relatedRapportId
          registerInclusionResolver: true
          relationName: rapport
          relationType: belongsTo
          sourceModel: Invoices
    fuzzysearch:
      - name: kunde
        content: 'jcs:{"fuzzy":true,"centralFuzzy":false,"datasource":"jcscherrer","appName":"Grpl","include":"kunde"}'
        # spec:
        #   fuzzy: true
        #   centralFuzzy: false
        #   datasource: "jcscherrer"
        #   appName: "Grpl"
        #   # include: "kundes"
    restcruds:
      - name: "jcscherrer"
        spec:
          datasource: "jcscherrer"
    controllers:
      - name: bexio
        content: Ly8gQHRzLW5vY2hlY2sKLy8gVW5jb21tZW50IHRoZXNlIGltcG9ydHMgdG8gYmVnaW4gdXNpbmcgdGhlc2UgY29vbCBmZWF0dXJlcyEKCmltcG9ydCB7IGluamVjdCB9IGZyb20gIkBsb29wYmFjay9jb3JlIjsKaW1wb3J0IHsgcmVwb3NpdG9yeSB9IGZyb20gIkBsb29wYmFjay9yZXBvc2l0b3J5IjsKCmltcG9ydCBkYXlqcyBmcm9tICJkYXlqcyI7CgppbXBvcnQgewogIEh0dHBFcnJvcnMsCiAgcG9zdCwKICBnZXQsCiAgUmVxdWVzdCwKICByZXF1ZXN0Qm9keSwKICBSZXN0QmluZGluZ3MsCiAgcGFyYW0sCn0gZnJvbSAiQGxvb3BiYWNrL3Jlc3QiOwoKY29uc3QgaHR0cHMgPSByZXF1aXJlKCJodHRwcyIpOwoKY29uc3QgYmV4aW9Ub2tlbiA9IHByb2Nlc3MuZW52WyJCRVhJT19UT0tFTiJdIHx8ICIiOwpjb25zdCBiZXhpb1Byb2ZpbGUgPSBwcm9jZXNzLmVudlsiQkVYSU9fUFJPRklMRSJdIHx8ICJkZWZhdWx0IjsKY29uc3QgYmV4aW9VcmwgPSBwcm9jZXNzLmVudlsiQkVYSU9fQVBJX1VSTCJdIHx8ICJodHRwczovL2FwaS5iZXhpby5jb20vMi4wIjsKY29uc3QgYmV4aW9TcGVjID0gewogIHJlc3BvbnNlczogewogICAgIjIwMCI6IHsKICAgICAgZGVzY3JpcHRpb246ICJiZXhpbyBwcm9maWxlIGFuZCBhcGkgdXJsIiwKICAgICAgY29udGVudDogewogICAgICAgICJhcHBsaWNhdGlvbi9qc29uIjogewogICAgICAgICAgc2NoZW1hOiB7IHR5cGU6ICJvYmplY3QiIH0sCiAgICAgICAgfSwKICAgICAgfSwKICAgIH0sCiAgfSwKfTsKYXN5bmMgZnVuY3Rpb24gcG9zdFJlcXVlc3QodXJsLCBkYXRhKSB7CiAgY29uc3QgZGF0YVN0cmluZyA9IEpTT04uc3RyaW5naWZ5KGRhdGEpOwoKICBjb25zdCBvcHRpb25zID0gewogICAgbWV0aG9kOiAiUE9TVCIsCiAgICBoZWFkZXJzOiB7CiAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOCIsCiAgICAgIEFjY2VwdDogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7YmV4aW9Ub2tlbn1gLAogICAgfSwKICAgIHRpbWVvdXQ6IDAsIC8vIGluIG1zCiAgfTsKCiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IHJlcSA9IGh0dHBzLnJlcXVlc3QodXJsLCBvcHRpb25zLCAocmVzKSA9PiB7CiAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA8IDIwMCB8fCByZXMuc3RhdHVzQ29kZSA+IDI5OSkgewogICAgICAgIHJldHVybiByZWplY3QoeyBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSwgbWVzc2FnZTogImVycm9yIiB9KTsKICAgICAgfQoKICAgICAgY29uc3QgYm9keSA9IFtdOwogICAgICByZXMub24oImRhdGEiLCAoY2h1bmspID0+IGJvZHkucHVzaChjaHVuaykpOwogICAgICByZXMub24oImVuZCIsICgpID0+IHsKICAgICAgICBjb25zdCByZXNTdHJpbmcgPSBCdWZmZXIuY29uY2F0KGJvZHkpLnRvU3RyaW5nKCk7CiAgICAgICAgcmVzb2x2ZShyZXNTdHJpbmcpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHJlcS5vbigiZXJyb3IiLCAoZXJyKSA9PiB7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CgogICAgcmVxLm9uKCJ0aW1lb3V0IiwgKCkgPT4gewogICAgICByZXEuZGVzdHJveSgpOwogICAgICByZWplY3QobmV3IEVycm9yKCJSZXF1ZXN0IHRpbWUgb3V0IikpOwogICAgfSk7CgogICAgcmVxLndyaXRlKGRhdGFTdHJpbmcpOwogICAgcmVxLmVuZCgpOwogIH0pOwp9Cgphc3luYyBmdW5jdGlvbiBkZWxldGVSZXF1ZXN0KHVybCkgewogIGNvbnN0IG9wdGlvbnMgPSB7CiAgICBtZXRob2Q6ICJERUxFVEUiLAogICAgaGVhZGVyczogewogICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL2pzb24iLAogICAgICBBY2NlcHQ6ICJhcHBsaWNhdGlvbi9qc29uIiwKICAgICAgQXV0aG9yaXphdGlvbjogYEJlYXJlciAke2JleGlvVG9rZW59YCwKICAgIH0sCiAgICB0aW1lb3V0OiAwLCAvLyBpbiBtcwogIH07CiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgIGNvbnN0IHJlcSA9IGh0dHBzLnJlcXVlc3QodXJsLCBvcHRpb25zLCAocmVzKSA9PiB7CiAgICAgIGlmIChyZXMuc3RhdHVzQ29kZSA8IDIwMCB8fCByZXMuc3RhdHVzQ29kZSA+IDI5OSkgewogICAgICAgIHJldHVybiByZWplY3QoeyBzdGF0dXNDb2RlOiByZXMuc3RhdHVzQ29kZSwgbWVzc2FnZTogImVycm9yIiB9KTsKICAgICAgfQoKICAgICAgY29uc3QgYm9keSA9IFtdOwogICAgICByZXMub24oImRhdGEiLCAoY2h1bmspID0+IGJvZHkucHVzaChjaHVuaykpOwogICAgICByZXMub24oImVuZCIsICgpID0+IHsKICAgICAgICBjb25zdCByZXNTdHJpbmcgPSBCdWZmZXIuY29uY2F0KGJvZHkpLnRvU3RyaW5nKCk7CiAgICAgICAgcmVzb2x2ZShyZXNTdHJpbmcpOwogICAgICB9KTsKICAgIH0pOwoKICAgIHJlcS5vbigiZXJyb3IiLCAoZXJyKSA9PiB7CiAgICAgIHJlamVjdChlcnIpOwogICAgfSk7CgogICAgcmVxLm9uKCJ0aW1lb3V0IiwgKCkgPT4gewogICAgICByZXEuZGVzdHJveSgpOwogICAgICByZWplY3QobmV3IEVycm9yKCJSZXF1ZXN0IHRpbWUgb3V0IikpOwogICAgfSk7CgogICAgcmVxLndyaXRlKCIiKTsKICAgIHJlcS5lbmQoKTsKICB9KTsKfQoKZXhwb3J0IGNsYXNzIEJleGlvQ29udHJvbGxlciB7CiAgY29uc3RydWN0b3IoCiAgICBAaW5qZWN0KFJlc3RCaW5kaW5ncy5IdHRwLlJFUVVFU1QpIHByaXZhdGUgcmVxOiBSZXF1ZXN0LAogICAgQHJlcG9zaXRvcnkuZ2V0dGVyKCJJbnZvaWNlR2VuZXJhdGlvbkNvbmZpZ1JlcG9zaXRvcnkiKQogICAgcHJvdGVjdGVkIEludm9pY2VHZW5lcmF0aW9uQ29uZmlnOiAoKSA9PiBQcm9taXNlPGFueT4sCiAgICBAcmVwb3NpdG9yeS5nZXR0ZXIoIlJhcHBvcnRSZXBvc2l0b3J5IikKICAgIHByb3RlY3RlZCBSYXBwb3J0OiAoKSA9PiBQcm9taXNlPGFueT4KICApIHsgfQoKICAvLyBNYXAgdG8gYHBvc3QgL2NyZWF0ZS1iZXhpby1pbnZvaWNlYAogIEBwb3N0KCIvY3JlYXRlLWJleGlvLWludm9pY2UiKQogIC8vIEByZXNwb25zZSgyMDAsIFBJTkdfUkVTUE9OU0UpCiAgYXN5bmMgY3JlYXRlQmV4aW9JbnZvaWNlKAogICAgQHJlcXVlc3RCb2R5KCkgQmV4aW9Cb2R5OiBhbnksCiAgICBAcGFyYW0uaGVhZGVyLnN0cmluZygiY29udGVudC10eXBlIikgY29udGVudFR5cGU6IHN0cmluZwogICk6IFByb21pc2U8b2JqZWN0PiB7CiAgICBjb25zb2xlLmxvZygiUmVxdWVzdCBjYWxsZWQgYXQ6IiwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpKTsKICAgIGNvbnNvbGUubG9nKCJpbiByZXF1ZXN0Iik7CiAgICBjb25zb2xlLmxvZyh7IGNvbnRlbnRUeXBlIH0pOwogICAgY29uc29sZS5sb2coeyBCZXhpb0JvZHkgfSk7CgogICAgdHlwZSBLdW5kZVR5cGUgPSB7CiAgICAgIGJleGlvSWQ6IHN0cmluZzsKICAgICAgZ2VidXJ0c3RhZzogc3RyaW5nIHwgbnVsbDsKICAgICAgaWQ6IG51bWJlcjsKICAgICAgbGFuZDogc3RyaW5nOwogICAgICBtYWlsOiBzdHJpbmc7CiAgICAgIG1haWwyOiBzdHJpbmc7CiAgICAgIG5hbWU6IHN0cmluZzsKICAgICAgbm90aXplbjogc3RyaW5nOwogICAgICBvcnQ6IHN0cmluZzsKICAgICAgcGhvbmU6IHN0cmluZzsKICAgICAgcGhvbmUyOiBzdHJpbmc7CiAgICAgIHBob25lTW9iaWxlOiBzdHJpbmc7CiAgICAgIHBsejogc3RyaW5nOwogICAgICBzdHJhc3NlOiBzdHJpbmc7CiAgICAgIHZvcm5hbWU6IHN0cmluZzsKICAgIH07CgogICAgdHlwZSBHcnVwcGVUeXBlID0gewogICAgICBpZDogbnVtYmVyOwogICAgICBncnVwcGVudHlwOiBzdHJpbmc7CiAgICAgIGdydXBwZW5uYW1lOiBzdHJpbmc7CiAgICB9OwogICAgdHlwZSBQbGF0elR5cGUgPSB7CiAgICAgIGlkOiBudW1iZXI7CiAgICAgIHRlbm5pc2NvdXJ0OiAiQ2x1YiIgfCAiTm9ybWFsIiB8ICJNaW5pLUNvdXJ0IiB8ICJQb2x5IjsKICAgIH07CgogICAgdHlwZSBUcmFpbmVyVHlwZSA9IHsKICAgICAgU3VtbWVyUmF0ZUJlZm9yZUlkOiBudW1iZXI7CiAgICAgIGFrdGl2OiBib29sZWFuOwogICAgICBlbWFpbDogc3RyaW5nOwogICAgICBpZDogbnVtYmVyOwogICAgICBuYW1lOiBzdHJpbmc7CiAgICAgIG5vdGl6ZW46IHN0cmluZzsKICAgICAgc3VtbWVyUmF0ZUFmdGVySWQ6IG51bWJlcjsKICAgICAgY2x1YlJhdGVJZDogbnVtYmVyOwogICAgICB0b2tlbjogc3RyaW5nOwogICAgICB2b3JuYW1lOiBzdHJpbmc7CiAgICAgIHdpbnRlclJhdGVBZnRlcklkOiBudW1iZXI7CiAgICAgIHdpbnRlclJhdGVCZWZvcmVJZDogbnVtYmVyOwogICAgICBTdW1tZXJSYXRlQWZ0ZXI6IHsKICAgICAgICBhcnRpY2xlZ3JvdXBpZDogc3RyaW5nOwogICAgICAgIGJleGlvSWQ6IHN0cmluZzsKICAgICAgICBpZDogbnVtYmVyOwogICAgICAgIGludGVybmNvZGU6IHN0cmluZzsKICAgICAgICBpbnRlcm5kZXNjcmlwdGlvbjogc3RyaW5nOwogICAgICAgIGludGVybm5hbWU6IHN0cmluZzsKICAgICAgICBzYWxlcHJpY2U6IG51bWJlcjsKICAgICAgICB0YXhpZDogc3RyaW5nOwogICAgICB9OwogICAgICBTdW1tZXJSYXRlQmVmb3JlOiB7CiAgICAgICAgYXJ0aWNsZWdyb3VwaWQ6IHN0cmluZzsKICAgICAgICBiZXhpb0lkOiBzdHJpbmc7CiAgICAgICAgaWQ6IG51bWJlcjsKICAgICAgICBpbnRlcm5jb2RlOiBzdHJpbmc7CiAgICAgICAgaW50ZXJuZGVzY3JpcHRpb246IHN0cmluZzsKICAgICAgICBpbnRlcm5uYW1lOiBzdHJpbmc7CiAgICAgICAgc2FsZXByaWNlOiBudW1iZXI7CiAgICAgICAgdGF4aWQ6IHN0cmluZzsKICAgICAgfTsKICAgICAgV2ludGVyUmF0ZUFmdGVyOiB7CiAgICAgICAgYXJ0aWNsZWdyb3VwaWQ6IHN0cmluZzsKICAgICAgICBiZXhpb0lkOiBzdHJpbmc7CiAgICAgICAgaWQ6IG51bWJlcjsKICAgICAgICBpbnRlcm5jb2RlOiBzdHJpbmc7CiAgICAgICAgaW50ZXJuZGVzY3JpcHRpb246IHN0cmluZzsKICAgICAgICBpbnRlcm5uYW1lOiBzdHJpbmc7CiAgICAgICAgc2FsZXByaWNlOiBudW1iZXI7CiAgICAgICAgdGF4aWQ6IHN0cmluZzsKICAgICAgfTsKICAgICAgV2ludGVyUmF0ZUJlZm9yZTogewogICAgICAgIGFydGljbGVncm91cGlkOiBzdHJpbmc7CiAgICAgICAgYmV4aW9JZDogc3RyaW5nOwogICAgICAgIGlkOiBudW1iZXI7CiAgICAgICAgaW50ZXJuY29kZTogc3RyaW5nOwogICAgICAgIGludGVybmRlc2NyaXB0aW9uOiBzdHJpbmc7CiAgICAgICAgaW50ZXJubmFtZTogc3RyaW5nOwogICAgICAgIHNhbGVwcmljZTogbnVtYmVyOwogICAgICAgIHRheGlkOiBzdHJpbmc7CiAgICAgIH07CiAgICAgIENsdWJSYXRlOiB7CiAgICAgICAgYXJ0aWNsZWdyb3VwaWQ6IHN0cmluZzsKICAgICAgICBiZXhpb0lkOiBzdHJpbmc7CiAgICAgICAgaWQ6IG51bWJlcjsKICAgICAgICBpbnRlcm5jb2RlOiBzdHJpbmc7CiAgICAgICAgaW50ZXJuZGVzY3JpcHRpb246IHN0cmluZzsKICAgICAgICBpbnRlcm5uYW1lOiBzdHJpbmc7CiAgICAgICAgc2FsZXByaWNlOiBudW1iZXI7CiAgICAgICAgdGF4aWQ6IHN0cmluZzsKICAgICAgfTsKICAgIH07CgogICAgdHlwZSBSYXBwb3J0VHlwZSA9IHsKICAgICAgYXJjaGl2ZWQ6IGJvb2xlYW47CiAgICAgIGRhdHVtOiBzdHJpbmc7CiAgICAgIGdydXBwZTogR3J1cHBlVHlwZTsKICAgICAgZ3J1cHBlSWQ6IG51bWJlcjsKICAgICAgaW52b2ljZWRJbjogc3RyaW5nIHwgbnVsbDsKICAgICAga3VuZGU6IEt1bmRlVHlwZTsKICAgICAga3VuZGVJZDogbnVtYmVyOwogICAgICBuYWNoaG9sdGVybWluOiBzdHJpbmcgfCBudWxsOwogICAgICBub3RpemVuOiBzdHJpbmc7CiAgICAgIHBsYXR6OiBQbGF0elR5cGU7CiAgICAgIHBsYXR6SWQ6IG51bWJlcjsKICAgICAgcHJvYmV0cmFpbmluZzogYm9vbGVhbjsKICAgICAgc3RhcnR6ZWl0OiBzdHJpbmcgfCBEYXRlOwogICAgICB0cmFpbmVyOiBUcmFpbmVyVHlwZTsKICAgICAgdHJhaW5lcklkOiBudW1iZXI7CiAgICAgIHRyYWluaW5nVHlwZTogc3RyaW5nOwogICAgICB0cmFpbmluZ3NkYXVlcjogc3RyaW5nOwogICAgfTsKCiAgICBjb25zdCBncm91cEludm9pY2VzQnlUcmFpbmVyID0gKAogICAgICBpbnZvaWNlczogUmFwcG9ydFR5cGVbXQogICAgKTogeyBbdHJhaW5lck5hbWU6IHN0cmluZ106IFJhcHBvcnRUeXBlW10gfSA9PiB7CiAgICAgIC8vIGdyb3VwIHRoZSBhcnJheSBvZiBpbnZvaWNlcyBieSB0cmFpbmVyIGFuZCByZXR1cm4gaXQKICAgICAgY29uc3QgZ3JvdXBlZEludm9pY2VzOiB7IFt0cmFpbmVyTmFtZTogc3RyaW5nXTogUmFwcG9ydFR5cGVbXSB9ID0ge307CgogICAgICBmb3IgKGNvbnN0IGludm9pY2Ugb2YgaW52b2ljZXMpIHsKICAgICAgICBjb25zdCB0cmFpbmVyTmFtZSA9IGludm9pY2UudHJhaW5lci5uYW1lOwogICAgICAgIGlmIChncm91cGVkSW52b2ljZXNbdHJhaW5lck5hbWVdKSB7CiAgICAgICAgICBncm91cGVkSW52b2ljZXNbdHJhaW5lck5hbWVdLnB1c2goaW52b2ljZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGdyb3VwZWRJbnZvaWNlc1t0cmFpbmVyTmFtZV0gPSBbaW52b2ljZV07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBncm91cGVkSW52b2ljZXM7CiAgICB9OwoKICAgIGNvbnN0IGdyb3VwVHJhaW5lclJhcHBvcnRzQnlUaW1lID0gYXN5bmMgKAogICAgICBpbnZvaWNlczogUmFwcG9ydFR5cGVbXQogICAgKTogeyBbcHJvZHVjdFR5cGU6IHN0cmluZ106IFJhcHBvcnRUeXBlW10gfSA9PiB7CiAgICAgIGNvbnN0IGludm9pY2VHZW5lcmF0aW9uQ29uZmlnID0gYXdhaXQgdGhpcy5JbnZvaWNlR2VuZXJhdGlvbkNvbmZpZygpOwoKICAgICAgbGV0IHNlYXNvbiA9IChhd2FpdCBpbnZvaWNlR2VuZXJhdGlvbkNvbmZpZy5maW5kQnlJZCgxKSkuY29uZmlnVmFsdWU7CiAgICAgIGxldCB0aW1lID0gKGF3YWl0IGludm9pY2VHZW5lcmF0aW9uQ29uZmlnLmZpbmRCeUlkKDIpKS5jb25maWdWYWx1ZSB8fCAxNzsKCiAgICAgIGNvbnNvbGUubG9nKHsgc2Vhc29uIH0pOwoKICAgICAgbGV0IGlzU3VtbWVyID0gc2Vhc29uID09PSAic3VtbWVyIiA/IHRydWUgOiBmYWxzZTsKICAgICAgbGV0IERheUVuZEhvdXIgPSBkYXlqcygpLmhvdXIodGltZSkubWludXRlKDApLnNlY29uZCgwKTsKCiAgICAgIGxldCBncm91cGVkSW52b2ljZXM6IHsgW3Byb2R1Y3RUeXBlOiBzdHJpbmddOiBSYXBwb3J0VHlwZVtdIH0gPSB7CiAgICAgICAgU3VtbWVyUmF0ZUFmdGVyOiBbXSwKICAgICAgICBTdW1tZXJSYXRlQmVmb3JlOiBbXSwKICAgICAgICBXaW50ZXJSYXRlQWZ0ZXI6IFtdLAogICAgICAgIFdpbnRlclJhdGVCZWZvcmU6IFtdLAogICAgICAgIENsdWJSYXRlOiBbXSwKICAgICAgfTsKCiAgICAgIGludm9pY2VzLm1hcCgocmFwcG9ydCkgPT4gewogICAgICAgIC8vIGlmIHRoZSBwbGF0eiBpcyBjbHViKGlkPTIpIHRoZW4gdGhlIHByaWNlIHNob3VsZCBiZSBjbHViUmF0ZS4KICAgICAgICBpZiAocmFwcG9ydC5wbGF0eklkID09PSAyKSB7CiAgICAgICAgICBncm91cGVkSW52b2ljZXMuQ2x1YlJhdGUucHVzaChyYXBwb3J0KTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgLy8gcmFwcG9ydC5zdGFydHplaXQgaXMgaW4gZm9ybWF0IDEzOjAwOjAwCiAgICAgICAgbGV0IHJhcHBvcnRUaW1lU3RhcnQgPSBkYXlqcygpCiAgICAgICAgICAuaG91cihyYXBwb3J0LnN0YXJ0emVpdC5zcGxpdCgiOiIpWzBdKQogICAgICAgICAgLm1pbnV0ZShyYXBwb3J0LnN0YXJ0emVpdC5zcGxpdCgiOiIpWzFdKQogICAgICAgICAgLnNlY29uZChyYXBwb3J0LnN0YXJ0emVpdC5zcGxpdCgiOiIpWzJdKTsKCiAgICAgICAgbGV0IHJhcHBvcnRUaW1lRW5kID0gZGF5anMoKQogICAgICAgICAgLmhvdXIocmFwcG9ydC5zdGFydHplaXQuc3BsaXQoIjoiKVswXSkKICAgICAgICAgIC5taW51dGUocmFwcG9ydC5zdGFydHplaXQuc3BsaXQoIjoiKVsxXSkKICAgICAgICAgIC5zZWNvbmQocmFwcG9ydC5zdGFydHplaXQuc3BsaXQoIjoiKVsyXSkKICAgICAgICAgIC5hZGQocmV0dXJuVHJhaW5pbmdEdXJhdGlvbkluSG91cnMocmFwcG9ydC50cmFpbmluZ3NkYXVlciksICJob3VyIik7CgogICAgICAgIGNvbnNvbGUubG9nKHsgcmFwcG9ydFRpbWVTdGFydCwgcmFwcG9ydFRpbWVFbmQsIHJhcHBvcnQgfSk7CgogICAgICAgIC8vIGlmIHJhcHBvcnRUaW1lU3RhcnQgaXMgYmVmb3JlIHRpbWUgYW5kIHJhcHBvcnRUaW1lRW5kIGlzIGFmdGVyIHRpbWUgdGhlbiBpdCBpcyBhIHNwbGl0IGludm9pY2UKICAgICAgICBpZiAoCiAgICAgICAgICByYXBwb3J0VGltZVN0YXJ0LmlzQmVmb3JlKERheUVuZEhvdXIsICJtaW51dGUiKSAmJgogICAgICAgICAgcmFwcG9ydFRpbWVFbmQuaXNBZnRlcihEYXlFbmRIb3VyLCAibWludXRlIikKICAgICAgICApIHsKICAgICAgICAgIC8vIHNwbGl0IHRoZSBpbnZvaWNlIGludG8gdHdvCiAgICAgICAgICBsZXQgcmFwcG9ydDEgPSB7IC4uLnJhcHBvcnQgfTsKICAgICAgICAgIGxldCByYXBwb3J0MiA9IHsgLi4ucmFwcG9ydCB9OwoKICAgICAgICAgIGxldCBkdXJhdGlvbjEgPSBNYXRoLmNlaWwoCiAgICAgICAgICAgIERheUVuZEhvdXIuZGlmZihyYXBwb3J0VGltZVN0YXJ0LCAibWludXRlIikKICAgICAgICAgICk7CiAgICAgICAgICBsZXQgZHVyYXRpb24yID0gTWF0aC5jZWlsKHJhcHBvcnRUaW1lRW5kLmRpZmYoRGF5RW5kSG91ciwgIm1pbnV0ZSIpKTsKCiAgICAgICAgICAvLyBhcHByb3hpbWF0ZSBpdCB0byB0aGUgbmVhcmVzdCAzMCBtaW51dGVzIGV4Y2VwdCBpZiBpdCBpcyBsZXNzIHRoYW4gNDUgbWludXRlcyBidXQgbW9yZSB0aGFuIDMwIG1pbnV0ZXMgdGhlbiBzZXQgaXQgdG8gNDUgbWludXRlcwogICAgICAgICAgaWYgKGR1cmF0aW9uMSA8IDQ1ICYmIGR1cmF0aW9uMSA+IDMwKSBkdXJhdGlvbjEgPSA0NTsKICAgICAgICAgIGVsc2UgewogICAgICAgICAgICBkdXJhdGlvbjEgPSBNYXRoLmNlaWwoZHVyYXRpb24xIC8gMzApICogMzA7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZHVyYXRpb24yIDwgNDUgJiYgZHVyYXRpb24yID4gMzApIGR1cmF0aW9uMiA9IDQ1OwogICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGR1cmF0aW9uMiA9IE1hdGguY2VpbChkdXJhdGlvbjIgLyAzMCkgKiAzMDsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZyh7IGR1cmF0aW9uMSwgZHVyYXRpb24yIH0pOwoKICAgICAgICAgIGR1cmF0aW9uMSA9IGAke01hdGguZmxvb3IoZHVyYXRpb24xIC8gNjApfToke2R1cmF0aW9uMSAlIDYwfWA7CiAgICAgICAgICBkdXJhdGlvbjIgPSBgJHtNYXRoLmZsb29yKGR1cmF0aW9uMiAvIDYwKX06JHtkdXJhdGlvbjIgJSA2MH1gOwoKICAgICAgICAgIGNvbnNvbGUubG9nKHsKICAgICAgICAgICAgZHVyYXRpb24xLAogICAgICAgICAgICBkdXJhdGlvbjIsCiAgICAgICAgICB9KTsKCiAgICAgICAgICByYXBwb3J0MS50cmFpbmluZ3NkYXVlciA9IGR1cmF0aW9uMTsKICAgICAgICAgIHJhcHBvcnQyLnRyYWluaW5nc2RhdWVyID0gZHVyYXRpb24yOwoKICAgICAgICAgIGlmIChpc1N1bW1lcikgewogICAgICAgICAgICAvLyBpZiB0aGUgcmFwcG9ydHMgc3RhcnR6ZWl0IGlzIGJlZm9yZSAxNzowMCB0aGVuIGl0IGlzIGEgU3VtbWVyUmF0ZUJlZm9yZQogICAgICAgICAgICBncm91cGVkSW52b2ljZXMuU3VtbWVyUmF0ZUJlZm9yZS5wdXNoKHJhcHBvcnQxKTsKICAgICAgICAgICAgZ3JvdXBlZEludm9pY2VzLlN1bW1lclJhdGVBZnRlci5wdXNoKHJhcHBvcnQyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQmVmb3JlLnB1c2gocmFwcG9ydDEpOwogICAgICAgICAgICBncm91cGVkSW52b2ljZXMuV2ludGVyUmF0ZUFmdGVyLnB1c2gocmFwcG9ydDIpOwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKGlzU3VtbWVyKSB7CiAgICAgICAgICAvLyBpZiB0aGUgcmFwcG9ydHMgc3RhcnR6ZWl0IGlzIGJlZm9yZSAxNzowMCB0aGVuIGl0IGlzIGEgU3VtbWVyUmF0ZUJlZm9yZQogICAgICAgICAgaWYgKHJhcHBvcnRUaW1lU3RhcnQuaXNCZWZvcmUoRGF5RW5kSG91ciwgImhvdXIiKSkgewogICAgICAgICAgICBncm91cGVkSW52b2ljZXMuU3VtbWVyUmF0ZUJlZm9yZS5wdXNoKHJhcHBvcnQpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZ3JvdXBlZEludm9pY2VzLlN1bW1lclJhdGVBZnRlci5wdXNoKHJhcHBvcnQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAocmFwcG9ydFRpbWVTdGFydC5pc0JlZm9yZShEYXlFbmRIb3VyLCAiaG91ciIpKSB7CiAgICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQmVmb3JlLnB1c2gocmFwcG9ydCk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBncm91cGVkSW52b2ljZXMuV2ludGVyUmF0ZUFmdGVyLnB1c2gocmFwcG9ydCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIGZvciAobGV0IGtleSBpbiBncm91cGVkSW52b2ljZXMpIHsKICAgICAgICBpZiAoZ3JvdXBlZEludm9pY2VzW2tleV0ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICBkZWxldGUgZ3JvdXBlZEludm9pY2VzW2tleV07CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBpZiB0aGUgcHJvZHVjdElkIGlzIHRoZSBzYW1lIHRoZW4gbWVyZ2Ugb25lIGludG8gdGhlIG90aGVyCiAgICAgIGlmICgKICAgICAgICBncm91cGVkSW52b2ljZXM/LlN1bW1lclJhdGVCZWZvcmUgJiYKICAgICAgICBncm91cGVkSW52b2ljZXM/LlN1bW1lclJhdGVBZnRlciAmJgogICAgICAgIGdyb3VwZWRJbnZvaWNlcz8uU3VtbWVyUmF0ZUJlZm9yZT8uWzBdLnRyYWluZXIuU3VtbWVyUmF0ZUJlZm9yZS5pZCA9PT0KICAgICAgICBncm91cGVkSW52b2ljZXM/LlN1bW1lclJhdGVBZnRlcj8uWzBdLnRyYWluZXIuU3VtbWVyUmF0ZUFmdGVyLmlkCiAgICAgICkgewogICAgICAgIGdyb3VwZWRJbnZvaWNlcy5TdW1tZXJSYXRlQmVmb3JlID0KICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5TdW1tZXJSYXRlQmVmb3JlPy5jb25jYXQoCiAgICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5TdW1tZXJSYXRlQWZ0ZXIKICAgICAgICAgICk7CiAgICAgICAgZGVsZXRlIGdyb3VwZWRJbnZvaWNlcy5TdW1tZXJSYXRlQWZ0ZXI7CiAgICAgIH0KCiAgICAgIGlmICgKICAgICAgICBncm91cGVkSW52b2ljZXM/LldpbnRlclJhdGVCZWZvcmUgJiYKICAgICAgICBncm91cGVkSW52b2ljZXM/LldpbnRlclJhdGVBZnRlciAmJgogICAgICAgIGdyb3VwZWRJbnZvaWNlcz8uV2ludGVyUmF0ZUJlZm9yZT8uWzBdLnRyYWluZXIuV2ludGVyUmF0ZUJlZm9yZS5pZCA9PT0KICAgICAgICBncm91cGVkSW52b2ljZXM/LldpbnRlclJhdGVBZnRlcj8uWzBdLnRyYWluZXIuV2ludGVyUmF0ZUFmdGVyLmlkCiAgICAgICkgewogICAgICAgIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQmVmb3JlID0KICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQmVmb3JlPy5jb25jYXQoCiAgICAgICAgICAgIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQWZ0ZXIKICAgICAgICAgICk7CiAgICAgICAgZGVsZXRlIGdyb3VwZWRJbnZvaWNlcy5XaW50ZXJSYXRlQWZ0ZXI7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHsgZ3JvdXBlZEludm9pY2VzIH0pOwogICAgICByZXR1cm4gZ3JvdXBlZEludm9pY2VzOwogICAgfTsKCiAgICBjb25zdCB1cGRhdGVSYXBwb3J0V2l0aEludm9pY2VJZCA9IGFzeW5jIChyYXBwb3J0SWQsIGludm9pY2VkSW4pID0+IHsKICAgICAgY29uc3QgcmFwcG9ydCA9IGF3YWl0IHRoaXMuUmFwcG9ydCgpOwoKICAgICAgYXdhaXQgcmFwcG9ydC51cGRhdGVCeUlkKHJhcHBvcnRJZCwgewogICAgICAgIGludm9pY2VkSW4sCiAgICAgIH0pOwogICAgfTsKCiAgICBjb25zdCByZXR1cm5UcmFpbmluZ0R1cmF0aW9uSW5Ib3VycyA9IChkdXJhdGlvbikgPT4gewogICAgICAvLyB0aGUgZHVyYXRpb24gaXMgaW4gZm9ybWF0IDAwOjMwOjAwIGFuZCB3ZSB3YW50IHRvIHJldHVybiAwLjUKICAgICAgbGV0IGhvdXJzID0gZHVyYXRpb24uc3BsaXQoIjoiKVswXTsKICAgICAgbGV0IG1pbnV0ZXMgPSBkdXJhdGlvbi5zcGxpdCgiOiIpWzFdOwoKICAgICAgcmV0dXJuIHBhcnNlSW50KGhvdXJzKSArIHBhcnNlSW50KG1pbnV0ZXMpIC8gNjA7CiAgICB9OwoKICAgIGNvbnN0IGZvcm1hdER1cmF0aW9uID0gKGR1cmF0aW9uKSA9PiB7CiAgICAgIGNvbnNvbGUubG9nKHsgZHVyYXRpb24gfSk7CiAgICAgIGxldCBob3VycyA9IGR1cmF0aW9uLnNwbGl0KCI6IilbMF07CiAgICAgIGxldCBtaW51dGVzID0gZHVyYXRpb24uc3BsaXQoIjoiKVsxXTsKCiAgICAgIC8vIGNoYW5nZSB0byBtaW51dGVzCiAgICAgIG1pbnV0ZXMgPSBwYXJzZUludChob3VycykgKiA2MCArIHBhcnNlSW50KG1pbnV0ZXMpOwoKICAgICAgaWYgKG1pbnV0ZXMgPCA0NSkgewogICAgICAgIG1pbnV0ZXMgPSAzMDsKICAgICAgfSBlbHNlIGlmIChtaW51dGVzIDwgNjApIHsKICAgICAgICBtaW51dGVzID0gNDU7CiAgICAgIH0gZWxzZSBpZiAobWludXRlcyA8IDc1KSB7CiAgICAgICAgbWludXRlcyA9IDYwOwogICAgICB9IGVsc2UgaWYgKG1pbnV0ZXMgPCAxMDUpIHsKICAgICAgICBtaW51dGVzID0gOTA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgbWludXRlcyA9IDEyMDsKICAgICAgfQogICAgICByZXR1cm4gbWludXRlcyArICIgbWluIjsKICAgIH07CgogICAgLy8gUmVwbHkgd2l0aCBhIGdyZWV0aW5nLCB0aGUgY3VycmVudCB0aW1lLCB0aGUgdXJsLCBhbmQgcmVxdWVzdCBoZWFkZXJzCiAgICBjb25zdCB7IGludm9pY2VUaXRsZURhdGUsIGdyb3VwLCBtaW5EYXRlLCBtYXhEYXRlIH0gPSBCZXhpb0JvZHkgYXMgewogICAgICBpbnZvaWNlVGl0bGVEYXRlOiBzdHJpbmc7CiAgICAgIG1pbkRhdGU6IHN0cmluZzsKICAgICAgbWF4RGF0ZTogc3RyaW5nOwogICAgICBncm91cDogewogICAgICAgIGt1bmRlOiBLdW5kZVR5cGU7CiAgICAgICAgcmFwcG9ydHM6IFJhcHBvcnRUeXBlW107CiAgICAgIH07CiAgICB9OwoKICAgIC8vIGxldCByYXBwb3J0c0dyb3VwZWRCeVRyYWluZXIgPSBncm91cEludm9pY2VzQnlUcmFpbmVyKGdyb3VwLnJhcHBvcnRzKTsKICAgIGxldCBjaGlsZHJlblJhcHBvcnRzID0ge307CiAgICBsZXQgcGFyZW50UmFwcG9ydHMgPSBbXTsKCiAgICBmb3IgKGxldCByYXBwb3J0IG9mIGdyb3VwLnJhcHBvcnRzKSB7CiAgICAgIGlmIChyYXBwb3J0Lmt1bmRlSWQgPT09IGdyb3VwLmt1bmRlLmlkKSB7CiAgICAgICAgcGFyZW50UmFwcG9ydHMucHVzaChyYXBwb3J0KTsKICAgICAgICBjb250aW51ZTsKICAgICAgfQoKICAgICAgaWYgKGNoaWxkcmVuUmFwcG9ydHNbYCR7cmFwcG9ydC5rdW5kZS52b3JuYW1lfSAke3JhcHBvcnQua3VuZGUubmFtZX1gXSkgewogICAgICAgIGNoaWxkcmVuUmFwcG9ydHNbYCR7cmFwcG9ydC5rdW5kZS52b3JuYW1lfSAke3JhcHBvcnQua3VuZGUubmFtZX1gXS5wdXNoKAogICAgICAgICAgcmFwcG9ydAogICAgICAgICk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGRyZW5SYXBwb3J0c1tgJHtyYXBwb3J0Lmt1bmRlLnZvcm5hbWV9ICR7cmFwcG9ydC5rdW5kZS5uYW1lfWBdID0gWwogICAgICAgICAgcmFwcG9ydCwKICAgICAgICBdOwogICAgICB9CiAgICB9CgogICAgbGV0IHBvc2l0aW9ucyA9IFtdOwoKICAgIGlmIChwYXJlbnRSYXBwb3J0cy5sZW5ndGggPiAwKSB7CiAgICAgIGxldCBwYXJlbnROYW1lID0gZ3JvdXAua3VuZGUudm9ybmFtZSArICIgIiArIGdyb3VwLmt1bmRlLm5hbWU7CiAgICAgIHBvc2l0aW9ucy5wdXNoKHsKICAgICAgICB0ZXh0OiBgJHtwYXJlbnROYW1lfSA8YnIvPiBgLAogICAgICAgIHR5cGU6ICJLYlBvc2l0aW9uVGV4dCIsCiAgICAgIH0pOwogICAgICBsZXQgcmFwcG9ydHNHcm91cGVkQnlUcmFpbmVyID0gZ3JvdXBJbnZvaWNlc0J5VHJhaW5lcihwYXJlbnRSYXBwb3J0cyk7CgogICAgICBmb3IgKGxldCB0cmFpbmVyIGluIHJhcHBvcnRzR3JvdXBlZEJ5VHJhaW5lcikgewogICAgICAgIGxldCByYXBwb3J0c0dyb3VwZWRCeVRpbWUgPSBhd2FpdCBncm91cFRyYWluZXJSYXBwb3J0c0J5VGltZSgKICAgICAgICAgIHJhcHBvcnRzR3JvdXBlZEJ5VHJhaW5lclt0cmFpbmVyXQogICAgICAgICk7CgogICAgICAgIGxldCB0cmFpbmVyTmFtZSA9IHJhcHBvcnRzR3JvdXBlZEJ5VHJhaW5lclt0cmFpbmVyXVswXS50cmFpbmVyLm5hbWU7CgogICAgICAgIGZvciAobGV0IHByb2R1Y3RUeXBlIGluIHJhcHBvcnRzR3JvdXBlZEJ5VGltZSkgewogICAgICAgICAgbGV0IHByb2R1Y3QgPQogICAgICAgICAgICByYXBwb3J0c0dyb3VwZWRCeVRpbWVbcHJvZHVjdFR5cGVdWzBdLnRyYWluZXJbcHJvZHVjdFR5cGVdOwoKICAgICAgICAgIGxldCBwb3NpdGlvblRleHQgPSBgJHtwcm9kdWN0LmludGVybm5hbWV9IDxici8+YDsKCiAgICAgICAgICBsZXQgYW1vdW50ID0gMDsKICAgICAgICAgIHJhcHBvcnRzR3JvdXBlZEJ5VGltZVtwcm9kdWN0VHlwZV0KICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IChkYXlqcyhhLmRhdHVtKS5pc0FmdGVyKGRheWpzKGIuZGF0dW0pKSA/IDEgOiAtMSkpCiAgICAgICAgICAgIC5mb3JFYWNoKChyYXBwb3J0LCBpKSA9PiB7CiAgICAgICAgICAgICAgaWYgKGkgPT09IHJhcHBvcnRzR3JvdXBlZEJ5VGltZVtwcm9kdWN0VHlwZV0ubGVuZ3RoIC0gMSkKICAgICAgICAgICAgICAgIHBvc2l0aW9uVGV4dCArPSBgJHtkYXlqcyhyYXBwb3J0LmRhdHVtKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERC5NTS5ZWVlZIgogICAgICAgICAgICAgICAgKX0gJHt0cmFpbmVyTmFtZX0gJHtmb3JtYXREdXJhdGlvbihyYXBwb3J0LnRyYWluaW5nc2RhdWVyKX1gOwogICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgIHBvc2l0aW9uVGV4dCArPSBgJHtkYXlqcyhyYXBwb3J0LmRhdHVtKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICJERC5NTS5ZWVlZIgogICAgICAgICAgICAgICAgKX0gJHt0cmFpbmVyTmFtZX0gJHtmb3JtYXREdXJhdGlvbigKICAgICAgICAgICAgICAgICAgcmFwcG9ydC50cmFpbmluZ3NkYXVlcgogICAgICAgICAgICAgICAgKX08YnIvPiBgOwoKICAgICAgICAgICAgICBhbW91bnQgKz0gcmV0dXJuVHJhaW5pbmdEdXJhdGlvbkluSG91cnMocmFwcG9ydC50cmFpbmluZ3NkYXVlcik7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgcG9zaXRpb25zLnB1c2goewogICAgICAgICAgICBhbW91bnQ6IGFtb3VudCwKICAgICAgICAgICAgdGF4X2lkOiBwcm9kdWN0LnRheGlkLAogICAgICAgICAgICB0ZXh0OiBwb3NpdGlvblRleHQsCiAgICAgICAgICAgIHVuaXRfcHJpY2U6IHByb2R1Y3Quc2FsZXByaWNlLAogICAgICAgICAgICBhcnRpY2xlX2lkOiBwcm9kdWN0LmJleGlvSWQsCiAgICAgICAgICAgIHR5cGU6ICJLYlBvc2l0aW9uQXJ0aWNsZSIsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBmb3IgKGxldCBrdW5kZU5hbWUgb2YgT2JqZWN0LmtleXMoY2hpbGRyZW5SYXBwb3J0cykpIHsKICAgICAgbGV0IHJhcHBvcnRzID0gY2hpbGRyZW5SYXBwb3J0c1trdW5kZU5hbWVdOwoKICAgICAgcG9zaXRpb25zLnB1c2goewogICAgICAgIHRleHQ6IGAke2t1bmRlTmFtZX0gPGJyLz4gYCwKICAgICAgICB0eXBlOiAiS2JQb3NpdGlvblRleHQiLAogICAgICB9KTsKICAgICAgbGV0IHJhcHBvcnRzR3JvdXBlZEJ5VHJhaW5lciA9IGdyb3VwSW52b2ljZXNCeVRyYWluZXIocmFwcG9ydHMpOwoKICAgICAgZm9yIChsZXQgdHJhaW5lciBpbiByYXBwb3J0c0dyb3VwZWRCeVRyYWluZXIpIHsKICAgICAgICBsZXQgcmFwcG9ydHNHcm91cGVkQnlUaW1lID0gYXdhaXQgZ3JvdXBUcmFpbmVyUmFwcG9ydHNCeVRpbWUoCiAgICAgICAgICByYXBwb3J0c0dyb3VwZWRCeVRyYWluZXJbdHJhaW5lcl0KICAgICAgICApOwoKICAgICAgICBsZXQgdHJhaW5lck5hbWUgPSByYXBwb3J0c0dyb3VwZWRCeVRyYWluZXJbdHJhaW5lcl1bMF0udHJhaW5lci5uYW1lOwoKICAgICAgICBmb3IgKGxldCBwcm9kdWN0VHlwZSBpbiByYXBwb3J0c0dyb3VwZWRCeVRpbWUpIHsKICAgICAgICAgIGxldCBwcm9kdWN0ID0KICAgICAgICAgICAgcmFwcG9ydHNHcm91cGVkQnlUaW1lW3Byb2R1Y3RUeXBlXVswXS50cmFpbmVyW3Byb2R1Y3RUeXBlXTsKCiAgICAgICAgICBsZXQgcG9zaXRpb25UZXh0ID0gYCR7cHJvZHVjdC5pbnRlcm5uYW1lfSA8YnIvPmA7CgogICAgICAgICAgbGV0IGFtb3VudCA9IDA7CiAgICAgICAgICByYXBwb3J0c0dyb3VwZWRCeVRpbWVbcHJvZHVjdFR5cGVdCiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiAoZGF5anMoYS5kYXR1bSkuaXNBZnRlcihkYXlqcyhiLmRhdHVtKSkgPyAxIDogLTEpKQogICAgICAgICAgICAuZm9yRWFjaCgocmFwcG9ydCwgaSkgPT4gewogICAgICAgICAgICAgIGlmIChpID09PSByYXBwb3J0c0dyb3VwZWRCeVRpbWVbcHJvZHVjdFR5cGVdLmxlbmd0aCAtIDEpCiAgICAgICAgICAgICAgICBwb3NpdGlvblRleHQgKz0gYCR7ZGF5anMocmFwcG9ydC5kYXR1bSkuZm9ybWF0KAogICAgICAgICAgICAgICAgICAiREQuTU0uWVlZWSIKICAgICAgICAgICAgICAgICl9ICR7dHJhaW5lck5hbWV9ICR7Zm9ybWF0RHVyYXRpb24ocmFwcG9ydC50cmFpbmluZ3NkYXVlcil9YDsKICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICBwb3NpdGlvblRleHQgKz0gYCR7ZGF5anMocmFwcG9ydC5kYXR1bSkuZm9ybWF0KAogICAgICAgICAgICAgICAgICAiREQuTU0uWVlZWSIKICAgICAgICAgICAgICAgICl9ICR7dHJhaW5lck5hbWV9ICR7Zm9ybWF0RHVyYXRpb24oCiAgICAgICAgICAgICAgICAgIHJhcHBvcnQudHJhaW5pbmdzZGF1ZXIKICAgICAgICAgICAgICAgICl9PGJyLz4gYDsKCiAgICAgICAgICAgICAgYW1vdW50ICs9IHJldHVyblRyYWluaW5nRHVyYXRpb25JbkhvdXJzKHJhcHBvcnQudHJhaW5pbmdzZGF1ZXIpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIHBvc2l0aW9ucy5wdXNoKHsKICAgICAgICAgICAgYW1vdW50OiBhbW91bnQsCiAgICAgICAgICAgIHRheF9pZDogcHJvZHVjdC50YXhpZCwKICAgICAgICAgICAgdGV4dDogcG9zaXRpb25UZXh0LAogICAgICAgICAgICB1bml0X3ByaWNlOiBwcm9kdWN0LnNhbGVwcmljZSwKICAgICAgICAgICAgYXJ0aWNsZV9pZDogcHJvZHVjdC5iZXhpb0lkLAogICAgICAgICAgICB0eXBlOiAiS2JQb3NpdGlvbkFydGljbGUiLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgY29uc29sZS5sb2coeyBwb3NpdGlvbnMgfSk7CiAgICBjb25zdCByZXFCb2R5ID0gewogICAgICAvLyB0aXRsZTogYCR7aW52b2ljZVRpdGxlRGF0ZX0tJHtncm91cC5rdW5kZS52b3JuYW1lfSAke2dyb3VwLmt1bmRlLm5hbWV9YCwKICAgICAgdGl0bGU6IGAke2ludm9pY2VUaXRsZURhdGV9YCwKICAgICAgY29udGFjdF9pZDogYmV4aW9Qcm9maWxlID09PSAibm9wIiA/IDIgOiBncm91cC5rdW5kZS5iZXhpb0lkLAogICAgICB1c2VyX2lkOiBiZXhpb1Byb2ZpbGUgPT09ICJub3AiID8gMSA6IDksCiAgICAgIGJhbmtfYWNjb3VudF9pZDogNywKICAgICAgaGVhZGVyOgogICAgICAgICJTZWhyIGdlZWhydGUgRGFtZW4gdW5kIEhlcnJlbjxiciAvPjxiciAvPldpciBlcmxhdWJlbiB1bnMsIElobmVuIHdpZSBmb2xndCBpbiBSZWNobnVuZyB6dSBzdGVsbGVuOiIsCiAgICAgIGZvb3RlcjoKICAgICAgICAiUFJJVkFUTEVLVElPTkVOOjxiciAvPkJlaSBWZXJoaW5kZXJ1bmcgYml0dGVuIHdpciB1bSBlaW5lIHNjaHJpZnRsaWNoZSBBYnNhZ2UgcGVyIE1haWwgKGtlaW5lIFNNUyEpIG1pbmRlc3RlbnMgMjRoIGltIHZvcmF1cyBhbjogc2Nob29sQGpjc2NoZXJyZXIuY29tLiBXaXJkIGRpZXMgbmljaHQgYmVyJnV1bWw7Y2tzaWNodGlndCwgd2lyZCBkZXIgZ2VidWNodGUgVGVubmlzdW50ZXJyaWNodCBpbiBSZWNobnVuZyBnZXN0ZWxsdC4gPGJyIC8+PGJyIC8+PGJyIC8+RnJldW5kbGljaGUgR3ImdXVtbDtzc2UiLAogICAgICBtd3N0X3R5cGU6IDIsCiAgICAgIG13c3RfaXNfbmV0OiB0cnVlLAogICAgICBzaG93X3Bvc2l0aW9uX3RheGVzOiBmYWxzZSwKICAgICAgaXNfdmFsaWRfZnJvbTogZGF5anMoKS5mb3JtYXQoIllZWVktTU0tREQiKSwKICAgICAgaXNfdmFsaWRfdG86IGRheWpzKCkuZW5kT2YoIm1vbnRoIikuZm9ybWF0KCJZWVlZLU1NLUREIiksCiAgICAgIHBvc2l0aW9ucywKICAgIH07CiAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyZXFCb2R5LCBudWxsLCAyKSk7CgogICAgY29uc3Qgc2VhcmNoSW52b2ljZSA9IGFzeW5jICh0aXRsZTogc3RyaW5nKSA9PiB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3Qgc2VhcmNoVXJsID0gYCR7YmV4aW9Vcmx9L2tiX2ludm9pY2Uvc2VhcmNoYDsKICAgICAgICBjb25zdCBzZWFyY2hCb2R5ID0gWwogICAgICAgICAgewogICAgICAgICAgICBmaWVsZDogInRpdGxlIiwKICAgICAgICAgICAgdmFsdWU6IHRpdGxlLAogICAgICAgICAgICBjcml0ZXJpYTogIj0iLAogICAgICAgICAgfSwKICAgICAgICBdOwogICAgICAgIGxldCByZXMgPSBhd2FpdCBwb3N0UmVxdWVzdChzZWFyY2hVcmwsIHNlYXJjaEJvZHkpOwogICAgICAgIHJlcyA9IEpTT04ucGFyc2UocmVzKTsKICAgICAgICByZXR1cm4gcmVzLmxlbmd0aCA+IDAgPyByZXNbMF0gOiBudWxsOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS5sb2coIkVycm9yIHNlYXJjaGluZyBmb3IgaW52b2ljZToiLCBlKTsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQogICAgfTsKCiAgICB0cnkgewogICAgICBsZXQgcmVzID0gYXdhaXQgcG9zdFJlcXVlc3QoYCR7YmV4aW9Vcmx9L2tiX2ludm9pY2VgLCByZXFCb2R5KTsKICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpOwoKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgZ3JvdXAucmFwcG9ydHMubWFwKGFzeW5jIChyYXBwb3J0KSA9PiB7CiAgICAgICAgICBhd2FpdCB1cGRhdGVSYXBwb3J0V2l0aEludm9pY2VJZCgKICAgICAgICAgICAgcmFwcG9ydC5pZCwKICAgICAgICAgICAgYCR7cmVzLmRvY3VtZW50X25yfSAtICR7cmVzLmlkfWAKICAgICAgICAgICk7CiAgICAgICAgfSkKICAgICAgKTsKCiAgICAgIGNvbnNvbGUubG9nKHsgcmVzIH0pOwogICAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBkYXRhOiByZXMsIHJlcWJvZHk6IHJlcUJvZHkgfSBhcyBhbnk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDQyOSkgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBpcyA0MjkiKTsKICAgICAgICBjb25zdCBleGlzdGluZ0ludm9pY2UgPSBhd2FpdCBzZWFyY2hJbnZvaWNlKHJlcUJvZHkudGl0bGUpOwogICAgICAgIGlmIChleGlzdGluZ0ludm9pY2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJJbnZvaWNlIGFscmVhZHkgZXhpc3RzOiIsIGV4aXN0aW5nSW52b2ljZSk7CiAgICAgICAgICBhd2FpdCBQcm9taXNlLmFsbCgKICAgICAgICAgICAgZ3JvdXAucmFwcG9ydHMubWFwKGFzeW5jIChyYXBwb3J0KSA9PiB7CiAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlUmFwcG9ydFdpdGhJbnZvaWNlSWQoCiAgICAgICAgICAgICAgICByYXBwb3J0LmlkLAogICAgICAgICAgICAgICAgYCR7ZXhpc3RpbmdJbnZvaWNlLmRvY3VtZW50X25yfSAtICR7ZXhpc3RpbmdJbnZvaWNlLmlkfWAKICAgICAgICAgICAgICApOwogICAgICAgICAgICB9KQogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IGV4aXN0aW5nSW52b2ljZSwgcmVxYm9keTogcmVxQm9keSB9IGFzIGFueTsKICAgICAgICB9CgogICAgICAgIC8vIHJldHJ5IGV2ZXJ5IDMgc2Vjb25kcyB1bnRpbCBpdCB3b3JrcwogICAgICAgIGNvbnN0IGludGVydmFsSWQgPSBzZXRJbnRlcnZhbChhc3luYyAoKSA9PiB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zb2xlLmxvZygidHJ5aW5nIG9uZSBtb3JlIHRpbWUiKTsKCiAgICAgICAgICAgIGxldCByZXMgPSBhd2FpdCBwb3N0UmVxdWVzdChgJHtiZXhpb1VybH0va2JfaW52b2ljZWAsIHJlcUJvZHkpOwoKICAgICAgICAgICAgcmVzID0gSlNPTi5wYXJzZShyZXMpOwogICAgICAgICAgICBjb25zb2xlLmxvZyh7IHJlcyB9KTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKCiAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKAogICAgICAgICAgICAgIGdyb3VwLnJhcHBvcnRzLm1hcChhc3luYyAocmFwcG9ydCkgPT4gewogICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlUmFwcG9ydFdpdGhJbnZvaWNlSWQoCiAgICAgICAgICAgICAgICAgIHJhcHBvcnQuaWQsCiAgICAgICAgICAgICAgICAgIGAke3Jlcy5kb2N1bWVudF9ucn0gLSAke3Jlcy5pZH1gCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIGRhdGE6IHJlcywgcmVxYm9keTogcmVxQm9keSB9IGFzIGFueTsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIGlzIDQyOSBpbiByZXRyeSIpOwogICAgICAgICAgICBpZiAoZS5zdGF0dXNDb2RlICE9PSA0MjkpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlLCBudWxsLCAyKSk7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUsIHJlcWJvZHk6IHJlcUJvZHkgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDMwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGUsIG51bGwsIDIpKTsKICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUsIHJlcWJvZHk6IHJlcUJvZHkgfTsKICAgICAgfQogICAgfQogIH0KCiAgLy8gTWFwIHRvIGBwb3N0IC9kZWxldGUtYmV4aW8taW52b2ljZWAKICBAcG9zdCgiL2RlbGV0ZS1iZXhpby1pbnZvaWNlIikKICAvLyBAcmVzcG9uc2UoMjAwLCBQSU5HX1JFU1BPTlNFKQogIGFzeW5jIGRlbGV0ZUJleGlvSW52b2ljZShAcmVxdWVzdEJvZHkoKSBCZXhpb0JvZHk6IGFueSk6IFByb21pc2U8b2JqZWN0PiB7CiAgICBjb25zb2xlLmxvZygiaW4gcmVxdWVzdCIpOwogICAgY29uc29sZS5sb2coeyBCZXhpb0JvZHkgfSk7CiAgICAvLyBSZXBseSB3aXRoIGEgZ3JlZXRpbmcsIHRoZSBjdXJyZW50IHRpbWUsIHRoZSB1cmwsIGFuZCByZXF1ZXN0IGhlYWRlcnMKICAgIGNvbnN0IHsgaW52b2ljZUlkIH0gPSBCZXhpb0JvZHk7CgogICAgdHJ5IHsKICAgICAgbGV0IHJlcyA9IGF3YWl0IGRlbGV0ZVJlcXVlc3QoYCR7YmV4aW9Vcmx9L2tiX2ludm9pY2UvJHtpbnZvaWNlSWR9YCk7CiAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgIHJldHVybiByZXM7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmIChlLnN0YXR1c0NvZGUgPT09IDQyOSkgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvciBpcyA0MjkiKTsKICAgICAgICAvLyByZXRyeSBldmVyeSAzIHNlY29uZHMgdW50aWwgaXQgd29ya3MKICAgICAgICBjb25zdCBpbnRlcnZhbElkID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gewogICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgY29uc29sZS5sb2coInRyeWluZyBvbmUgbW9yZSB0aW1lIik7CgogICAgICAgICAgICBsZXQgcmVzID0gYXdhaXQgZGVsZXRlUmVxdWVzdCgKICAgICAgICAgICAgICBgJHtiZXhpb1VybH0va2JfaW52b2ljZS8ke2ludm9pY2VJZH1gCiAgICAgICAgICAgICk7CgogICAgICAgICAgICByZXMgPSBKU09OLnBhcnNlKHJlcyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHsgcmVzIH0pOwogICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpOwoKICAgICAgICAgICAgcmV0dXJuIHJlczsKICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coImVycm9yIGlzIDQyOSBpbiByZXRyeSIpOwogICAgICAgICAgICBpZiAoZS5zdGF0dXNDb2RlICE9PSA0MjkpIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShlLCBudWxsLCAyKSk7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTsKICAgICAgICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUgfTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIDMwMDApOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKEpTT04uc3RyaW5naWZ5KGUsIG51bGwsIDIpKTsKICAgICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGUgfTsKICAgICAgfQogICAgfQogIH0KCiAgQGdldCgiL2JleGlvLWluZm8iLCBiZXhpb1NwZWMpCiAgYXN5bmMgZ2V0QmV4aW9JbmZvKCk6IFByb21pc2U8b2JqZWN0PiB7CiAgICB0cnkgewogICAgICBjb25zdCBiZXhpb1Byb2ZpbGUgPSBwcm9jZXNzLmVudlsiQkVYSU9fUFJPRklMRSJdIHx8ICJkZWZhdWx0IjsKICAgICAgY29uc3QgYmV4aW9BcGlVcmwgPSBwcm9jZXNzLmVudlsiQkVYSU9fQVBJX1VSTCJdIHx8ICJkZWZhdWx0IjsKICAgICAgcmV0dXJuIHsKICAgICAgICBiZXhpb1Byb2ZpbGUsCiAgICAgICAgYmV4aW9BcGlVcmwsCiAgICAgIH07CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICB0aHJvdyBuZXcgSHR0cEVycm9yc1tlLnN0YXR1c0NvZGVdKCIiKTsKICAgIH0KICB9Cn0K
      - name: ping2
        content: aW1wb3J0IHtpbmplY3R9IGZyb20gJ0Bsb29wYmFjay9jb3JlJzsKaW1wb3J0IHsKICBSZXF1ZXN0LAogIFJlc3RCaW5kaW5ncywKICBnZXQsCiAgcmVzcG9uc2UsCiAgUmVzcG9uc2VPYmplY3QsCn0gZnJvbSAnQGxvb3BiYWNrL3Jlc3QnOwoKLyoqCiAqIE9wZW5BUEkgcmVzcG9uc2UgZm9yIHBpbmcyKCkKICovCmNvbnN0IFBJTkcyX1JFU1BPTlNFOiBSZXNwb25zZU9iamVjdCA9IHsKICBkZXNjcmlwdGlvbjogJ1BpbmcyIFJlc3BvbnNlJywKICBjb250ZW50OiB7CiAgICAnYXBwbGljYXRpb24vanNvbic6IHsKICAgICAgc2NoZW1hOiB7CiAgICAgICAgdHlwZTogJ29iamVjdCcsCiAgICAgICAgdGl0bGU6ICdQaW5nMlJlc3BvbnNlJywKICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICBncmVldGluZzoge3R5cGU6ICdzdHJpbmcnfSwKICAgICAgICAgIGRhdGU6IHt0eXBlOiAnc3RyaW5nJ30sCiAgICAgICAgICB1cmw6IHt0eXBlOiAnc3RyaW5nJ30sCiAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6IHt0eXBlOiAnc3RyaW5nJ30sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICB9LAogICAgfSwKICB9LAp9OwoKLyoqCiAqIEEgc2ltcGxlIGNvbnRyb2xsZXIgdG8gYm91bmNlIGJhY2sgaHR0cCByZXF1ZXN0cwogKi8KZXhwb3J0IGNsYXNzIFBpbmcyQ29udHJvbGxlciB7CiAgY29uc3RydWN0b3IoQGluamVjdChSZXN0QmluZGluZ3MuSHR0cC5SRVFVRVNUKSBwcml2YXRlIHJlcTogUmVxdWVzdCkge30KCiAgLy8gTWFwIHRvIGBHRVQgL3BpbmcyYAogIEBnZXQoJy9waW5nMicpCiAgQHJlc3BvbnNlKDIwMCwgUElORzJfUkVTUE9OU0UpCiAgcGluZzIoKTogb2JqZWN0IHsKICAgIC8vIFJlcGx5IHdpdGggYSBncmVldGluZywgdGhlIGN1cnJlbnQgdGltZSwgdGhlIHVybCwgYW5kIHJlcXVlc3QgaGVhZGVycwogICAgcmV0dXJuIHsKICAgICAgZ3JlZXRpbmc6ICdIZWxsbyBmcm9tIGdyYXBwbGUnLAogICAgICBkYXRlOiBuZXcgRGF0ZSgpLAogICAgICB1cmw6IHRoaXMucmVxLnVybCwKICAgICAgaGVhZGVyczogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5yZXEuaGVhZGVycyksCiAgICB9OwogIH0KfQo=
    prerelationpatches:
      - name: install
        content: ZWNobyAiaW5zdGFsbGluZyBkZXBlbmRlbmNpZXMiCm5wbSBpIGRheWpzCg==
      - name: addAdditionalRelationsToTrainer
        content: IyEvYmluL2Jhc2gKCmVjaG8gImVuYWJsaW5nIGhhc01hbnlUaHJvdWdoIHdpdGggc2FtZSB0YWJsZSAmIG5vLXBrIHJlZmVyZW5jZS4uLiIKCiMgdXBkYXRlIHRyYWluZXIgbW9kZWwgdG8gYWRkIHJlbGF0aW9ucwoKYWRkVHlwZXNBdD0iJChncmVwIC1uICd0eXBlOiBSZWxhdGlvblR5cGUuaGFzTWFueTsnIG5vZGVfbW9kdWxlcy9AbG9vcGJhY2svcmVwb3NpdG9yeS9kaXN0L3JlbGF0aW9ucy9yZWxhdGlvbi50eXBlcy5kLnRzIHwgY3V0IC1kIDogLWYgMSkiCmFkZFR5cGVzQXQ9JCgoYWRkVHlwZXNBdCsxKSkKc2VkIC1pICIkYWRkVHlwZXNBdCBpIGN1c3RvbVJlZmVyZW5jZUtleVRvPzogc3RyaW5nOyBcbiBjdXN0b21SZWZlcmVuY2VLZXlGcm9tPzogc3RyaW5nOyIgbm9kZV9tb2R1bGVzL0Bsb29wYmFjay9yZXBvc2l0b3J5L2Rpc3QvcmVsYXRpb25zL3JlbGF0aW9uLnR5cGVzLmQudHMKCnNlZCAtaSAicyNjb25zdCB0YXJnZXRQcmltYXJ5S2V5ID0gcmVsYXRpb25NZXRhLmtleVRvOyNjb25zdCB0YXJnZXRQcmltYXJ5S2V5ID0gcmVsYXRpb25NZXRhLmN1c3RvbVJlZmVyZW5jZUtleVRvIHx8IHJlbGF0aW9uTWV0YS5rZXlUbzsjZyIgbm9kZV9tb2R1bGVzL0Bsb29wYmFjay9yZXBvc2l0b3J5L2Rpc3QvcmVsYXRpb25zL2hhcy1tYW55L2hhcy1tYW55LXRocm91Z2guaGVscGVycy5qcwpzZWQgLWkgInMjY29uc3QgdGFyZ2V0SWQgPSByZWxhdGlvbk1ldGEua2V5VG87I2NvbnN0IHRhcmdldElkID0gcmVsYXRpb25NZXRhLmN1c3RvbVJlZmVyZW5jZUtleVRvIHx8IHJlbGF0aW9uTWV0YS5rZXlUbzsjZyIgbm9kZV9tb2R1bGVzL0Bsb29wYmFjay9yZXBvc2l0b3J5L2Rpc3QvcmVsYXRpb25zL2hhcy1tYW55L2hhcy1tYW55LXRocm91Z2guaGVscGVycy5qcwoKCmFkZElmQ29uZGl0aW9uQXQ9IiQoZ3JlcCAtbiAnY29uc3QgdGFyZ2V0UHJpbWFyeUtleSA9IChfZiA9IHJlbGF0aW9uTWV0YS5rZXlUbyknIG5vZGVfbW9kdWxlcy9AbG9vcGJhY2svcmVwb3NpdG9yeS9kaXN0L3JlbGF0aW9ucy9oYXMtbWFueS9oYXMtbWFueS10aHJvdWdoLmhlbHBlcnMuanMgfCBjdXQgLWQgOiAtZiAxKSIKYWRkSWZDb25kaXRpb25BdD0kKChhZGRJZkNvbmRpdGlvbkF0KzEpKQpzZWQgLWkgIiRhZGRJZkNvbmRpdGlvbkF0IGkgaWYgKHJlbGF0aW9uTWV0YS5jdXN0b21SZWZlcmVuY2VLZXlUbykgeyBcbiB0YXJnZXRQcmltYXJ5S2V5ID0gcmVsYXRpb25NZXRhLmN1c3RvbVJlZmVyZW5jZUtleVRvOyBcbn0iIG5vZGVfbW9kdWxlcy9AbG9vcGJhY2svcmVwb3NpdG9yeS9kaXN0L3JlbGF0aW9ucy9oYXMtbWFueS9oYXMtbWFueS10aHJvdWdoLmhlbHBlcnMuanMKCnNlZCAtaSAicyNjb25zdCB0YXJnZXRQcmltYXJ5S2V5ID0gKF9mID0gcmVsYXRpb25NZXRhLmtleVRvKSNsZXQgdGFyZ2V0UHJpbWFyeUtleSA9IChfZiA9IHJlbGF0aW9uTWV0YS5rZXlUbykjZyIgbm9kZV9tb2R1bGVzL0Bsb29wYmFjay9yZXBvc2l0b3J5L2Rpc3QvcmVsYXRpb25zL2hhcy1tYW55L2hhcy1tYW55LXRocm91Z2guaGVscGVycy5qcwoKc2VkIC1pICJzI2tleUZyb206IHJlbGF0aW9uTWV0YS5rZXlGcm9tLCNrZXlGcm9tOiByZWxhdGlvbk1ldGEuY3VzdG9tUmVmZXJlbmNlS2V5RnJvbSB8fCByZWxhdGlvbk1ldGEua2V5RnJvbSwjZyIgbm9kZV9tb2R1bGVzL0Bsb29wYmFjay9yZXBvc2l0b3J5L2Rpc3QvcmVsYXRpb25zL2hhcy1tYW55L2hhcy1tYW55LXRocm91Z2guaGVscGVycy5qcwoKZWNobyAiLS0tIgo=
    postpatches:
      - name: addAdditionalRelationsToTrainer
        content: IyEvYmluL2Jhc2gKZWNobyAiQ3JlYXRpbmcgZXh0cmEgcmVsYXRpb25zLi4uIgoKIyB1cGRhdGUgdHJhaW5lciBtb2RlbCB0byBhZGQgcmVsYXRpb25zCgpkZWxldGV0ZXh0dW50aWwgKCkgewogICAgSU5GSUxFPSQxCiAgICBGUk9NVEVYVD0kMgogICAgVE9URVhUPSQzCiAgICBERUxFVEVGUk9NPSQoKCQoZ3JlcCAiJHtUT1RFWFR9IiBzcmMvbW9kZWxzL3RyYWluZXIubW9kZWwudHMgLW4gfCBjdXQgLWQgOiAtZiAxKS0kKGdyZXAgLUIxMCAiJHtUT1RFWFR9IiBzcmMvbW9kZWxzL3RyYWluZXIubW9kZWwudHMgfCBncmVwICIke0ZST01URVhUfSIgLUExMCB8IHdjIC1sKSkpCiAgICBERUxFVEVVTlRJTD0kKGdyZXAgIiR7VE9URVhUfSIgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzIC1uIHwgY3V0IC1kIDogLWYgMSkKICAgIGlmIFsgJHtERUxFVEVGUk9NfSAtZ3QgMCBdICYmIFsgJHtERUxFVEVVTlRJTH0gLWd0IDAgXTsgdGhlbgogICAgICAgIHNlZCAtaSAiJHtERUxFVEVGUk9NfSIsIiR7REVMRVRFVU5USUx9Iid7ZDt9JyBzcmMvbW9kZWxzL3RyYWluZXIubW9kZWwudHMKICAgIGVsc2UKICAgICAgICBlY2hvICJub3QgZGVsZXRlZCBhcyBvbmUgb2YgdGhlIHZhcmlhYmxlcyBpcyBlbXB0eS4iCiAgICBmaQp9CgpkZWxldGV0ZXh0dW50aWwgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzICJAcHJvcGVydHkoeyIgInN1bW1lclJhdGVBZnRlcklkPzogbnVtYmVyOyIKZGVsZXRldGV4dHVudGlsIHNyYy9tb2RlbHMvdHJhaW5lci5tb2RlbC50cyAiQHByb3BlcnR5KHsiICJzdW1tZXJSYXRlQmVmb3JlSWQ/OiBudW1iZXI7IgpkZWxldGV0ZXh0dW50aWwgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzICJAcHJvcGVydHkoeyIgIndpbnRlclJhdGVBZnRlcklkPzogbnVtYmVyOyIKZGVsZXRldGV4dHVudGlsIHNyYy9tb2RlbHMvdHJhaW5lci5tb2RlbC50cyAiQHByb3BlcnR5KHsiICJ3aW50ZXJSYXRlQmVmb3JlSWQ/OiBudW1iZXI7IgpkZWxldGV0ZXh0dW50aWwgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzICJAcHJvcGVydHkoeyIgImNsdWJSYXRlSWQ/OiBudW1iZXI7IgoKYWRkQXRNb2RlbD0iJChncmVwIC1uICdTdW1tZXJSYXRlQmVmb3JlSWQ6IG51bWJlcjsnIHNyYy9tb2RlbHMvdHJhaW5lci5tb2RlbC50cyB8IGN1dCAtZCA6IC1mIDEpIgphZGRBdE1vZGVsPSQoKGFkZEF0TW9kZWwrMSkpCgpzZWQgLWkgIiRhZGRBdE1vZGVsIGkgQGJlbG9uZ3NUbygoKSA9PiBQcm9kdWN0LCB7bmFtZTogJ1N1bW1lclJhdGVBZnRlcid9KSBcbiBTdW1tZXJSYXRlQWZ0ZXJJZDogbnVtYmVyOyIgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzCmFkZEF0TW9kZWw9JCgoYWRkQXRNb2RlbCsyKSkKCnNlZCAtaSAiJGFkZEF0TW9kZWwgaSBAYmVsb25nc1RvKCgpID0+IFByb2R1Y3QsIHtuYW1lOiAnV2ludGVyUmF0ZUJlZm9yZSd9KSBcbiBXaW50ZXJSYXRlQmVmb3JlSWQ6IG51bWJlcjsiIHNyYy9tb2RlbHMvdHJhaW5lci5tb2RlbC50cwphZGRBdE1vZGVsPSQoKGFkZEF0TW9kZWwrMikpCgpzZWQgLWkgIiRhZGRBdE1vZGVsIGkgQGJlbG9uZ3NUbygoKSA9PiBQcm9kdWN0LCB7bmFtZTogJ1dpbnRlclJhdGVBZnRlcid9KSBcbiBXaW50ZXJSYXRlQWZ0ZXJJZDogbnVtYmVyOyIgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzCmFkZEF0TW9kZWw9JCgoYWRkQXRNb2RlbCsyKSkKCnNlZCAtaSAiJGFkZEF0TW9kZWwgaSBAYmVsb25nc1RvKCgpID0+IFByb2R1Y3QsIHtuYW1lOiAnQ2x1YlJhdGUnfSkgXG4gQ2x1YlJhdGVJZDogbnVtYmVyOyIgc3JjL21vZGVscy90cmFpbmVyLm1vZGVsLnRzCgojIHVwZGF0ZSB0cmFpbmVyIHJlcG9zaXRvcnkgdG8gYWRkIHJlbGF0aW9ucwoKYWRkQXRSZXBvc2l0b3J5PSIkKGdyZXAgLW4gJ3JlYWRvbmx5IFN1bW1lclJhdGVCZWZvcmUnIHNyYy9yZXBvc2l0b3JpZXMvdHJhaW5lci5yZXBvc2l0b3J5LnRzIHwgY3V0IC1kIDogLWYgMSkiCmFkZEF0UmVwb3NpdG9yeT0kKChhZGRBdFJlcG9zaXRvcnkrMSkpCgpzZWQgLWkgIiRhZGRBdFJlcG9zaXRvcnkgaSBwdWJsaWMgcmVhZG9ubHkgU3VtbWVyUmF0ZUFmdGVyOiBCZWxvbmdzVG9BY2Nlc3NvcjxQcm9kdWN0LCB0eXBlb2YgVHJhaW5lci5wcm90b3R5cGUuaWQ+OyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKYWRkQXRSZXBvc2l0b3J5PSQoKGFkZEF0UmVwb3NpdG9yeSsxKSkKCnNlZCAtaSAiJGFkZEF0UmVwb3NpdG9yeSBpIHB1YmxpYyByZWFkb25seSBXaW50ZXJSYXRlQmVmb3JlOiBCZWxvbmdzVG9BY2Nlc3NvcjxQcm9kdWN0LCB0eXBlb2YgVHJhaW5lci5wcm90b3R5cGUuaWQ+OyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKYWRkQXRSZXBvc2l0b3J5PSQoKGFkZEF0UmVwb3NpdG9yeSsxKSkKCnNlZCAtaSAiJGFkZEF0UmVwb3NpdG9yeSBpIHB1YmxpYyByZWFkb25seSBXaW50ZXJSYXRlQWZ0ZXI6IEJlbG9uZ3NUb0FjY2Vzc29yPFByb2R1Y3QsIHR5cGVvZiBUcmFpbmVyLnByb3RvdHlwZS5pZD47IiBzcmMvcmVwb3NpdG9yaWVzL3RyYWluZXIucmVwb3NpdG9yeS50cwphZGRBdFJlcG9zaXRvcnk9JCgoYWRkQXRSZXBvc2l0b3J5KzEpKQoKc2VkIC1pICIkYWRkQXRSZXBvc2l0b3J5IGkgcHVibGljIHJlYWRvbmx5IENsdWJSYXRlOiBCZWxvbmdzVG9BY2Nlc3NvcjxQcm9kdWN0LCB0eXBlb2YgVHJhaW5lci5wcm90b3R5cGUuaWQ+OyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKCmFkZEF0UmVwb3NpdG9yeT0iJChncmVwIC1uICd0aGlzLnJlZ2lzdGVySW5jbHVzaW9uUmVzb2x2ZXInIHNyYy9yZXBvc2l0b3JpZXMvdHJhaW5lci5yZXBvc2l0b3J5LnRzIHwgY3V0IC1kIDogLWYgMSkiCmFkZEF0UmVwb3NpdG9yeT0kKChhZGRBdFJlcG9zaXRvcnkrMSkpCgpzZWQgLWkgIiRhZGRBdFJlcG9zaXRvcnkgaSB0aGlzLlN1bW1lclJhdGVBZnRlciA9IHRoaXMuY3JlYXRlQmVsb25nc1RvQWNjZXNzb3JGb3IoJ1N1bW1lclJhdGVBZnRlcicsIHByb2R1Y3RSZXBvc2l0b3J5R2V0dGVyLCk7IFxuIHRoaXMucmVnaXN0ZXJJbmNsdXNpb25SZXNvbHZlcignU3VtbWVyUmF0ZUFmdGVyJywgdGhpcy5TdW1tZXJSYXRlQWZ0ZXIuaW5jbHVzaW9uUmVzb2x2ZXIpOyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKCmFkZEF0UmVwb3NpdG9yeT0kKChhZGRBdFJlcG9zaXRvcnkrMSkpCnNlZCAtaSAiJGFkZEF0UmVwb3NpdG9yeSBpIHRoaXMuV2ludGVyUmF0ZUJlZm9yZSA9IHRoaXMuY3JlYXRlQmVsb25nc1RvQWNjZXNzb3JGb3IoJ1dpbnRlclJhdGVCZWZvcmUnLCBwcm9kdWN0UmVwb3NpdG9yeUdldHRlciwpOyBcbiB0aGlzLnJlZ2lzdGVySW5jbHVzaW9uUmVzb2x2ZXIoJ1dpbnRlclJhdGVCZWZvcmUnLCB0aGlzLldpbnRlclJhdGVCZWZvcmUuaW5jbHVzaW9uUmVzb2x2ZXIpOyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKCmFkZEF0UmVwb3NpdG9yeT0kKChhZGRBdFJlcG9zaXRvcnkrMSkpCnNlZCAtaSAiJGFkZEF0UmVwb3NpdG9yeSBpIHRoaXMuV2ludGVyUmF0ZUFmdGVyID0gdGhpcy5jcmVhdGVCZWxvbmdzVG9BY2Nlc3NvckZvcignV2ludGVyUmF0ZUFmdGVyJywgcHJvZHVjdFJlcG9zaXRvcnlHZXR0ZXIsKTsgXG4gdGhpcy5yZWdpc3RlckluY2x1c2lvblJlc29sdmVyKCdXaW50ZXJSYXRlQWZ0ZXInLCB0aGlzLldpbnRlclJhdGVBZnRlci5pbmNsdXNpb25SZXNvbHZlcik7IiBzcmMvcmVwb3NpdG9yaWVzL3RyYWluZXIucmVwb3NpdG9yeS50cwoKYWRkQXRSZXBvc2l0b3J5PSQoKGFkZEF0UmVwb3NpdG9yeSsxKSkKc2VkIC1pICIkYWRkQXRSZXBvc2l0b3J5IGkgdGhpcy5DbHViUmF0ZSA9IHRoaXMuY3JlYXRlQmVsb25nc1RvQWNjZXNzb3JGb3IoJ0NsdWJSYXRlJywgcHJvZHVjdFJlcG9zaXRvcnlHZXR0ZXIsKTsgXG4gdGhpcy5yZWdpc3RlckluY2x1c2lvblJlc29sdmVyKCdDbHViUmF0ZScsIHRoaXMuQ2x1YlJhdGUuaW5jbHVzaW9uUmVzb2x2ZXIpOyIgc3JjL3JlcG9zaXRvcmllcy90cmFpbmVyLnJlcG9zaXRvcnkudHMKCiMgdXBkYXRlIGNvbnRyb2xsZXIgdG8gYWRkIHJlbGF0aW9ucwoKc2VkIC1pICJzI3JldHVybiB0aGlzLnRyYWluZXJSZXBvc2l0b3J5LlN1bW1lclJhdGVCZWZvcmUoaWQpOyNyZXR1cm4gWyBcbiB0aGlzLnRyYWluZXJSZXBvc2l0b3J5LlN1bW1lclJhdGVCZWZvcmUoaWQpLCBcbiB0aGlzLnRyYWluZXJSZXBvc2l0b3J5LlN1bW1lclJhdGVBZnRlcihpZCksIFxuIHRoaXMudHJhaW5lclJlcG9zaXRvcnkuV2ludGVyUmF0ZUJlZm9yZShpZCksIFxuIHRoaXMudHJhaW5lclJlcG9zaXRvcnkuV2ludGVyUmF0ZUFmdGVyKGlkKSwgXG4gdGhpcy50cmFpbmVyUmVwb3NpdG9yeS5DbHViUmF0ZShpZCkgXG5dOyNnIiBzcmMvY29udHJvbGxlcnMvdHJhaW5lci1wcm9kdWN0LmNvbnRyb2xsZXIudHMKc2VkIC1pICJzI1Byb21pc2U8UHJvZHVjdD4jUHJvbWlzZTxQcm9taXNlPFByb2R1Y3Q+W10+I2ciIHNyYy9jb250cm9sbGVycy90cmFpbmVyLXByb2R1Y3QuY29udHJvbGxlci50cwoKZWNobyAiLS0tIgo=
  gruim:
    # uiimagetag: "0.1.38"
    ssl: true
    sslissuer: letsencrypt-grapple-demo
    style: '{"colors":{"primary":{"DEFAULT":"#004a99","fg":"#ffffff"},"accent":{"DEFAULT":"#fa7252","fg":"#ffffff"}}}'
    config: '{"global":{"list-size":10,"field-properties":{"id":{"readonly":false}}, "weekStart": 1},"schema":{"Trainer":{"field-order":["id","vorname","name","email","aktiv","SummerRateBefore","SummerRateAfter","WinterRateBefore","WinterRateAfter","ClubRate","notizen","token"]},"Kunde":{"field-order":["id","bexioId","name","vorname","mail","ort","plz","strasse","land"]},"Gruppe":{"field-order":["id","gruppenname","beschreibung","gruppentyp","notizen"]},"Product":{"field-order":["id","bexioId","interncode","internname","interndescription","saleprice","taxid","articlegroupid"]},"Rapport":{"field-order":["id","datum","invoicedIn","trainer","kunde","gruppe","platz","startzeit","trainingsdauer","trainingType","nachholtermin","probetraining","archived","notizen"]}}}'
    additionalpackages: "svelte-fullcalendar@2.0.0-beta.0 @fullcalendar/common@5.10.1 @fullcalendar/core@5.10.1 @fullcalendar/daygrid@5.10.1 @fullcalendar/interaction@5.10.1 @fullcalendar/timegrid@5.10.1 dayjs@1.11.2"
    custommodules:
      - name: singleDay
        content: PHNjcmlwdCBsYW5nPSJ0cyI+CiAgaW1wb3J0IEZ1bGxDYWxlbmRhciwgeyBDYWxlbmRhck9wdGlvbnMsIFZpZXdBcGkgfSBmcm9tICJzdmVsdGUtZnVsbGNhbGVuZGFyIjsKICBpbXBvcnQgdGltZWdyaWRQbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci90aW1lZ3JpZCI7CiAgaW1wb3J0IGRheWpzIGZyb20gImRheWpzIjsKICBpbXBvcnQgaW50ZXJhY3Rpb25QbHVnaW4gZnJvbSAiQGZ1bGxjYWxlbmRhci9pbnRlcmFjdGlvbiI7IC8vIGZvciBzZWxlY3RhYmxlCiAgaW1wb3J0IHsgY3JlYXRlRXZlbnREaXNwYXRjaGVyLCBvbk1vdW50IH0gZnJvbSAic3ZlbHRlIjsKCiAgY29uc3QgZGlzcGF0Y2ggPSBjcmVhdGVFdmVudERpc3BhdGNoZXIoKTsKCiAgbGV0IGV2ZW50R3VpZCA9IDA7CiAgbGV0IGlubmVyV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDsKCiAgbGV0IHRyYWluZXJzOiBhbnkgPSBbXTsKCiAgb25Nb3VudChhc3luYyBmdW5jdGlvbiAoKSB7CiAgICBsZXQgcmFwcG9ydHMgPSBhd2FpdCBmZXRjaCgKICAgICAgYCR7cHJvY2Vzcy5lbnYuU1ZFTFRFX0FQUF9SRU1PVEVfVVJMfS9hcGkvdHJhaW5lcnM/ZmlsdGVyPXsib3JkZXIiOiJpZCIsIndoZXJlIjp7ImFrdGl2Ijp0cnVlfX1gCiAgICApOwogICAgdHJhaW5lcnMgPSBhd2FpdCByYXBwb3J0cy5qc29uKCk7CiAgfSk7CgogIGV4cG9ydCBsZXQgcmFwb3J0czogewogICAgZGF0dW06IGFueTsKICAgIHN0YXJ0emVpdDogYW55OwogICAgdHJhaW5pbmdzZGF1ZXI6IGFueTsKICAgIGt1bmRlOiBhbnk7CiAgICBncnVwcGU6IGFueTsKICAgIHBsYXR6OiBhbnk7CiAgICB0cmFpbmVyOiBhbnk7CiAgICBub3RpemVuPzogc3RyaW5nOwogIH1bXSA9IFtdOwogIGV4cG9ydCBsZXQgc2VsZWN0ZWREYXRlID0gIiI7CiAgZXhwb3J0IGxldCBzZWxlY3RlZFRyYWluZXI6IGFueTsKCiAgbGV0IGNhbGVuZGFyUmVmOiBhbnk7CiAgZnVuY3Rpb24gc2V0KCkgewogICAgaWYgKGNhbGVuZGFyUmVmKSB7CiAgICAgIGNvbnN0IGNhbGVuZGFyQXBpID0gY2FsZW5kYXJSZWYuZ2V0QVBJKCk7CiAgICAgIGNhbGVuZGFyQXBpLmdvdG9EYXRlKHNlbGVjdGVkRGF0ZSk7CiAgICB9CiAgfQoKICAkOiB7CiAgICBsZXQgc2hvd2VkRGF0ZSA9IHNlbGVjdGVkRGF0ZTsKCiAgICBzZXQoKTsKICAgIGNvbnNvbGUubG9nKHNob3dlZERhdGUpOwogIH0KCiAgZnVuY3Rpb24gY3JlYXRlRXZlbnRJZCgpIHsKICAgIHJldHVybiBTdHJpbmcoZXZlbnRHdWlkKyspOwogIH0KICBsZXQgb3B0aW9uczogQ2FsZW5kYXJPcHRpb25zID0gewogICAgaGVhZGVyVG9vbGJhcjogZmFsc2UsCiAgICBpbml0aWFsRGF0ZTogc2VsZWN0ZWREYXRlLAogICAgaW5pdGlhbFZpZXc6ICJ0aW1lR3JpZERheSIsCiAgICBwbHVnaW5zOiBbdGltZWdyaWRQbHVnaW4sIGludGVyYWN0aW9uUGx1Z2luXSwKICAgIHNsb3RNaW5UaW1lOiAiMDY6MDA6MDAiLAogICAgc2xvdE1heFRpbWU6ICIyMjowMDowMCIsCiAgICBzZWxlY3RhYmxlOiB0cnVlLAogICAgaGVpZ2h0OiAiMTAwJSIsCiAgICBoYW5kbGVXaW5kb3dSZXNpemU6IHRydWUsCiAgfTsKCiAgJDogewogICAgaW5uZXJXaWR0aDsKICAgIG9wdGlvbnMgPSB7CiAgICAgIC4uLm9wdGlvbnMsCiAgICB9OwogIH0KCiAgJDogewogICAgb3B0aW9ucyA9IHsKICAgICAgaGVhZGVyVG9vbGJhcjogZmFsc2UsCiAgICAgIGluaXRpYWxEYXRlOiBzZWxlY3RlZERhdGUsCiAgICAgIGluaXRpYWxWaWV3OiAidGltZUdyaWREYXkiLAogICAgICBwbHVnaW5zOiBbdGltZWdyaWRQbHVnaW4sIGludGVyYWN0aW9uUGx1Z2luXSwKICAgICAgc2xvdEV2ZW50T3ZlcmxhcDogZmFsc2UsCgogICAgICBldmVudENvbnRlbnQ6IChhcmdzOiBhbnkpID0+IHsKICAgICAgICBsZXQgZGlmZmVyZW5jZSA9IGRheWpzKGFyZ3MuZXZlbnQuX2luc3RhbmNlLnJhbmdlLmVuZCkuZGlmZigKICAgICAgICAgIGRheWpzKGFyZ3MuZXZlbnQuX2luc3RhbmNlLnJhbmdlLnN0YXJ0KSwKICAgICAgICAgICJtaW51dGUiCiAgICAgICAgKTsKICAgICAgICBsZXQgdGl0bGUgPSBhcmdzLmV2ZW50Ll9kZWYudGl0bGU7CiAgICAgICAgbGV0IHBsYXR6ID0gYXJncy5ldmVudC5fZGVmLmV4dGVuZGVkUHJvcHMucGxhdHo7CiAgICAgICAgbGV0IHRpbWVUZXh0ID0gYXJncy50aW1lVGV4dDsKICAgICAgICBsZXQgbm90aXplbiA9IGFyZ3MuZXZlbnQuX2RlZi5leHRlbmRlZFByb3BzLm5vdGl6ZW47CgogICAgICAgIGxldCBhdmFpbGFibGVSb3dzID0gZGlmZmVyZW5jZSAvIDMwOwogICAgICAgIGlmIChhdmFpbGFibGVSb3dzID49IDQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGh0bWw6IGA8ZGl2IGNsYXNzPSJjdXJzb3ItcG9pbnRlciIgdGl0bGU9IiR7dGl0bGV9ICR7cGxhdHp9ICR7bm90aXplbn0iID4KICAgICAgICAgICAgPHAgY2xhc3M9InRydW5jYXRlIHRleHQtc20iPiR7dGltZVRleHR9PC9wPgogICAgICAgICAgICA8cCBjbGFzcz0idHJ1bmNhdGUgdGV4dC1zbSI+JHt0aXRsZX08L3A+CiAgICAgICAgICAgIDxwIGNsYXNzPSJ0cnVuY2F0ZSB0ZXh0LXNtIj4ke3BsYXR6fTwvcD4KICAgICAgICAgICAgPHAgY2xhc3M9InRydW5jYXRlIHRleHQtc20iPiR7bm90aXplbn08L3A+CiAgICAgICAgICAgPC9kaXY+YCwKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIGlmIChhdmFpbGFibGVSb3dzID49IDMpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGh0bWw6IGA8ZGl2IGNsYXNzPSJjdXJzb3ItcG9pbnRlciIgdGl0bGU9IiR7dGl0bGV9ICR7cGxhdHp9ICR7bm90aXplbn0iID4KICAgICAgICAgICAgPHAgY2xhc3M9InRydW5jYXRlIHRleHQtc20iPiR7dGltZVRleHR9PC9wPgogICAgICAgICAgICA8cCBjbGFzcz0idHJ1bmNhdGUgdGV4dC1zbSI+JHt0aXRsZX08L3A+CiAgICAgICAgICAgIDxwIGNsYXNzPSJ0cnVuY2F0ZSB0ZXh0LXNtIj4ke3BsYXR6ID8gYHwgJHtwbGF0en1gIDogIiJ9ICR7CiAgICAgICAgICAgICAgbm90aXplbiA/IGB8ICR7bm90aXplbn1gIDogIiIKICAgICAgICAgICAgfTwvcD4KICAgICAgICAgICA8L2Rpdj5gLAogICAgICAgICAgfTsKICAgICAgICB9IGVsc2UgaWYgKGF2YWlsYWJsZVJvd3MgPj0gMikgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaHRtbDogYDxkaXYgY2xhc3M9ImN1cnNvci1wb2ludGVyIiB0aXRsZT0iJHt0aXRsZX0gJHtwbGF0en0gJHtub3RpemVufSIgPgogICAgICAgICAgICAgIDxwIGNsYXNzPSJ0cnVuY2F0ZSB0ZXh0LXNtIj4ke3RpbWVUZXh0fTwvcD4KICAgICAgICAgICAgICA8cCBjbGFzcz0idHJ1bmNhdGUgdGV4dC1zbSI+JHt0aXRsZX0gJHsKICAgICAgICAgICAgICAgIHBsYXR6ID8gYHwgJHtwbGF0en1gIDogIiIKICAgICAgICAgICAgICB9ICR7bm90aXplbiA/IGB8ICR7bm90aXplbn1gIDogIiJ9PC9wPgogICAgICAgICAgICAgPC9kaXY+YCwKICAgICAgICAgIH07CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGh0bWw6IGA8ZGl2IGNsYXNzPSJjdXJzb3ItcG9pbnRlciIgdGl0bGU9IiR7dGl0bGV9ICR7cGxhdHp9ICR7bm90aXplbn0iID4KICAgICAgICAgICAgICA8cCBjbGFzcz0idHJ1bmNhdGUgdGV4dC1zbSI+JHt0aW1lVGV4dH0gfCAke3RpdGxlfSAkewogICAgICAgICAgICAgICAgcGxhdHogPyBgfCAke3BsYXR6fWAgOiAiIgogICAgICAgICAgICAgIH0gJHtub3RpemVuID8gYHwgJHtub3RpemVufWAgOiAiIn08L3A+CiAgICAgICAgICAgICA8L2Rpdj5gLAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGV2ZW50czogcmFwb3J0cy5tYXAoKHIpID0+IHsKICAgICAgICBsZXQgbmFtZSA9IHIua3VuZGUKICAgICAgICAgID8gYEt1bmRlOiAke3Iua3VuZGU/Lm5hbWV9LCAke3Iua3VuZGU/LnZvcm5hbWV9YAogICAgICAgICAgOiByLmdydXBwZQogICAgICAgICAgICA/IGBHcnVwcGU6ICR7ci5ncnVwcGU/LmdydXBwZW50eXB9IC0gJHtyLmdydXBwZT8uZ3J1cHBlbm5hbWV9YAogICAgICAgICAgICA6ICIiOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6IGNyZWF0ZUV2ZW50SWQoKSwKICAgICAgICAgIHRpdGxlOiBgJHtuYW1lfWAsCiAgICAgICAgICBwbGF0ejogYCR7ci5wbGF0ej8udGVubmlzY291cnQgfHwgIiJ9YCwKICAgICAgICAgIG5vdGl6ZW46IGAke3Iubm90aXplbiB8fCAiIn1gLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBgICR7CiAgICAgICAgICAgIHNlbGVjdGVkVHJhaW5lcj8udmFsdWUKICAgICAgICAgICAgICA/IHIua3VuZGUKICAgICAgICAgICAgICAgID8gIiMxYTVjYTMiCiAgICAgICAgICAgICAgICA6ICIjZmVkNWNiIgogICAgICAgICAgICAgIDogcj8udHJhaW5lcj8uY29sb3IgfHwgIiMxYTVjYTMiCiAgICAgICAgICB9ICBgLAogICAgICAgICAgdGV4dENvbG9yOiBgJHtyPy50cmFpbmVyPy5jb2xvckZvbnQgfHwgIiMwMDAifWAsCiAgICAgICAgICBib3JkZXJDb2xvcjogYCR7ci5rdW5kZSA/ICIjZmZmIiA6ICIjZmE3MjUyIn1gLAogICAgICAgICAgY2xhc3NOYW1lOiBgc2luZ2xlLWRheS1ldmVudC1zdHlsZSAkewogICAgICAgICAgICByLnRyYWluaW5nc2RhdWVyID8gIiIgOiAiZG90dGVkLWRhc2hlZCIKICAgICAgICAgIH0gYCwKICAgICAgICAgIHN0YXJ0OiBuZXcgRGF0ZSgKICAgICAgICAgICAgZGF5anMoci5kYXR1bSkKICAgICAgICAgICAgICAuc2V0KCJob3VyIiwgci5zdGFydHplaXQuc3BsaXQoIjoiKVswXSkKICAgICAgICAgICAgICAuc2V0KCJtaW51dGUiLCByLnN0YXJ0emVpdC5zcGxpdCgiOiIpWzFdKQogICAgICAgICAgICAgIC5mb3JtYXQoKQogICAgICAgICAgKSwKICAgICAgICAgIGVuZDogbmV3IERhdGUoCiAgICAgICAgICAgIGRheWpzKHIuZGF0dW0pCiAgICAgICAgICAgICAgLnNldCgiaG91ciIsIHIuc3RhcnR6ZWl0LnNwbGl0KCI6IilbMF0pCiAgICAgICAgICAgICAgLnNldCgibWludXRlIiwgci5zdGFydHplaXQuc3BsaXQoIjoiKVsxXSkKICAgICAgICAgICAgICAuYWRkKHIudHJhaW5pbmdzZGF1ZXI/LnNwbGl0KCI6IilbMF0gfHwgMSwgImhvdXIiKQogICAgICAgICAgICAgIC5hZGQoci50cmFpbmluZ3NkYXVlcj8uc3BsaXQoIjoiKVsxXSB8fCAwLCAibWludXRlIikKICAgICAgICAgICAgICAuZm9ybWF0KCkKICAgICAgICAgICksCiAgICAgICAgICByYXBwb3J0OiByLAogICAgICAgIH07CiAgICAgIH0pLAogICAgICBldmVudFRpbWVGb3JtYXQ6IHsKICAgICAgICBob3VyOiAiMi1kaWdpdCIsCiAgICAgICAgbWludXRlOiAiMi1kaWdpdCIsCiAgICAgICAgaG91cjEyOiBmYWxzZSwKICAgICAgfSwKICAgICAgc2VsZWN0YWJsZTogdHJ1ZSwKICAgICAgc2VsZWN0OiBmdW5jdGlvbiAoaW5mbzogYW55KSB7CiAgICAgICAgZGlzcGF0Y2goImRhdGVTZWxlY3RlZCIsIGluZm8pOwoKICAgICAgICAvLyBzaG93IGNyZWF0ZSBmb3JtIHdpdGggdGhlIHN0YXJ0IGRhdGUgYW5kIGR1cmF0aW9uKGVuZCBkYXRlIC0gc3RhcnQgZGF0ZSkgcHJlIGZpbGxlZAogICAgICB9LAoKICAgICAgZXZlbnRDbGljazogZnVuY3Rpb24gKGluZm86IGFueSkgewogICAgICAgIGRpc3BhdGNoKCJldmVudENsaWNrZWQiLCBpbmZvKTsKICAgICAgfSwKCiAgICAgIGRhdGVDbGljazogZnVuY3Rpb24gKGluZm86IGFueSkgewogICAgICAgIGRpc3BhdGNoKCJkYXRlU2VsZWN0ZWQiLCBpbmZvKTsKICAgICAgfSwKICAgICAgYnVzaW5lc3NIb3VyczogewogICAgICAgIC8vIGRheXMgb2Ygd2Vlay4gYW4gYXJyYXkgb2YgemVyby1iYXNlZCBkYXkgb2Ygd2VlayBpbnRlZ2VycyAoMD1TdW5kYXkpCiAgICAgICAgZGF5c09mV2VlazogWzEsIDIsIDMsIDQsIDVdLCAvLyBNb25kYXkgLSBUaHVyc2RheQogICAgICAgIHN0YXJ0VGltZTogIjA2OjAwIiwgLy8gYSBzdGFydCB0aW1lICgxMGFtIGluIHRoaXMgZXhhbXBsZSkKICAgICAgICBlbmRUaW1lOiAiMjI6MDAiLCAvLyBhbiBlbmQgdGltZSAoNnBtIGluIHRoaXMgZXhhbXBsZSkKICAgICAgfSwKICAgICAgc2xvdExhYmVsRm9ybWF0OiB7CiAgICAgICAgaG91cjogIm51bWVyaWMiLAogICAgICAgIG1pbnV0ZTogIjItZGlnaXQiLAogICAgICAgIGhvdXIxMjogZmFsc2UsCiAgICAgIH0sCiAgICAgIGhlaWdodDogIjEwMCUiLAogICAgICBoYW5kbGVXaW5kb3dSZXNpemU6IHRydWUsCiAgICAgIHdpbmRvd1Jlc2l6ZTogZnVuY3Rpb24gKGFyZzogeyB2aWV3OiBWaWV3QXBpIH0pIHsKICAgICAgICBhcmcudmlldy5jYWxlbmRhci51cGRhdGVTaXplKCk7CiAgICAgIH0sCiAgICB9OwogIH0KPC9zY3JpcHQ+Cgo8c3ZlbHRlOndpbmRvdyBiaW5kOmlubmVyV2lkdGggLz4KPEZ1bGxDYWxlbmRhcgogIGJpbmQ6dGhpcz17Y2FsZW5kYXJSZWZ9CiAge29wdGlvbnN9CiAgY2xhc3M9InB0LTQgbWF4LXctc2NyZWVuLWxnIG14LWF1dG8gbWluLWgtZnVsbCIKLz4KPGRpdj4KICB7I2lmIHRyYWluZXJzLmxlbmd0aCA+IDB9CiAgICA8ZGl2IGNsYXNzPSJmbGV4IGZsZXgtd3JhcCBtdC00IGdhcC00IGp1c3RpZnktYmV0d2VlbiI+CiAgICAgIHsjZWFjaCB0cmFpbmVycyBhcyB0cmFpbmVyfQogICAgICAgIDxkaXYgY2xhc3M9ImZsZXggaXRlbXMtY2VudGVyIGdhcC1bMC4xcmVtXSI+CiAgICAgICAgICA8ZGl2CiAgICAgICAgICAgIGNsYXNzPSJ3LTQgaC00IHJvdW5kZWQtZnVsbCBtci0yIgogICAgICAgICAgICBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjoge3RyYWluZXIuY29sb3J9IgogICAgICAgICAgPjwvZGl2PgogICAgICAgICAgPHA+e3RyYWluZXIubmFtZX08L3A+CiAgICAgICAgPC9kaXY+CiAgICAgIHsvZWFjaH0KICAgIDwvZGl2PgogIHsvaWZ9CjwvZGl2Pgo=
      - name: trainerDropDown
        content: PHNjcmlwdCBsYW5nPSJ0cyI+CiAgaW1wb3J0IHsgb25Nb3VudCB9IGZyb20gInN2ZWx0ZSI7CgogIGltcG9ydCBTZWxlY3QgZnJvbSAic3ZlbHRlLXNlbGVjdC9TZWxlY3Quc3ZlbHRlIjsKICBpbXBvcnQgeyBjcmVhdGVFdmVudERpc3BhdGNoZXIgfSBmcm9tICJzdmVsdGUiOwogIGNvbnN0IGRpc3BhdGNoID0gY3JlYXRlRXZlbnREaXNwYXRjaGVyKCk7CgogIGV4cG9ydCBsZXQgc2VsZWN0ZWRWYWx1ZToKICAgIHwgewogICAgICAgIHZhbHVlOiBudW1iZXI7CiAgICAgICAgbGFiZWw6IHN0cmluZzsKICAgICAgfQogICAgfCB7fSA9IHt9OwoKICBleHBvcnQgbGV0IHBsYWNlaG9sZGVyID0gIlRyYWluZXIiOwoKICBsZXQgaGFuZGxlQ2hhbmdlID0gKCkgPT4gewogICAgZGlzcGF0Y2goInVwZGF0ZVRyYWluZXIiLCB7CiAgICAgIHNlbGVjdGVkVmFsdWUsCiAgICB9KTsKICB9OwoKICBsZXQgbGlzdDogYW55ID0gW107CgogIG9uTW91bnQoYXN5bmMgZnVuY3Rpb24gKCkgewogICAgbGV0IHNhdmVkVHJhaW5lciA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0cmFpbmVyIik7CgogICAgaWYgKHNhdmVkVHJhaW5lcikgewogICAgICBzZWxlY3RlZFZhbHVlID0gSlNPTi5wYXJzZShzYXZlZFRyYWluZXIpOwogICAgfQoKICAgIC8vIGdldCB0aGUgbGlzdCBvZiB0cmFpbmVycwogICAgLy8gc2V0IHRoZSBsaXN0IG9mIHRyYWluZXJzIHRvIHRoZSBzZWxlY3QgY29tcG9uZW50CiAgICBsZXQgcmFwcG9ydHMgPSBhd2FpdCBmZXRjaCgKICAgICAgYCR7cHJvY2Vzcy5lbnYuU1ZFTFRFX0FQUF9SRU1PVEVfVVJMfS9hcGkvdHJhaW5lcnM/ZmlsdGVyPXsid2hlcmUiOnsiYWt0aXYiOnRydWV9fWAKICAgICk7CiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmFwcG9ydHMuanNvbigpOwoKICAgIGxpc3QgPSBbCiAgICAgIHsKICAgICAgICB2bGF1ZTogMCwKICAgICAgICBsYWJlbDogIkFsbCBUcmFpbmVycyIsCiAgICAgIH0sCiAgICAgIC4uLmRhdGEubWFwKChyOiBhbnkpID0+ICh7CiAgICAgICAgdmFsdWU6IHIuaWQsCiAgICAgICAgbGFiZWw6IHIubmFtZSwKICAgICAgfSkpLAogICAgXTsKICB9KTsKPC9zY3JpcHQ+Cgo8ZGl2IGNsYXNzPSJtYXgtdy1zbSB0aGVtZWQiPgogIDxTZWxlY3QKICAgIGl0ZW1zPXtsaXN0fQogICAgYmluZDp2YWx1ZT17c2VsZWN0ZWRWYWx1ZX0KICAgIGJpbmQ6cGxhY2Vob2xkZXIKICAgIG9uOnNlbGVjdD17aGFuZGxlQ2hhbmdlfQogIC8+CjwvZGl2PgoKPHN0eWxlIGxhbmc9InBvc3Rjc3MiPgogIC50aGVtZWQgewogICAgLS1ib3JkZXJIb3ZlckNvbG9yOiAjMWE1Y2EzOwogICAgLS1ib3JkZXJSYWRpdXM6IDRweDsKICAgIC0taXRlbUhvdmVyQkc6ICNmZmYxZWU7CiAgICAtLWl0ZW1Jc0FjdGl2ZUJHOiAjZmE3MjUyOwogIH0KPC9zdHlsZT4K
      - name: createEvent
        content: PHNjcmlwdCBsYW5nPSJ0cyI+CiAgaW1wb3J0IGRheWpzIGZyb20gImRheWpzIjsKICBpbXBvcnQgQ3JlYXRlRXZlbnQgZnJvbSAiLi4vLi4vbW9kdWxlcy9SYXBwb3J0L2NyZWF0ZS5zdmVsdGUiOwogIGltcG9ydCB7IG9uTW91bnQgfSBmcm9tICJzdmVsdGUiOwogIGxldCBzYXZlZFRyYWluZXI6IHsKICAgIHZhbHVlOiBudW1iZXI7CiAgICBsYWJlbDogc3RyaW5nOwogIH0gPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0cmFpbmVyIikgfHwgInt9Iik7CiAgZXhwb3J0IGxldCBjbG9zZVBvcHVwID0gKCkgPT4ge307CiAgZXhwb3J0IGxldCBzY2hlbWE6IGFueSA9IHt9OwoKICBleHBvcnQgbGV0IHNlbGVjdGVkRGF0ZTogc3RyaW5nID0gZGF5anMoKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICBleHBvcnQgbGV0IHNlbGVjdGVkU3RhcnRUaW1lOiBzdHJpbmcgPSBkYXlqcygpLmZvcm1hdCgiSEg6bW0iKTsKICBleHBvcnQgbGV0IHNlbGVjdGVkRHVyYXRpb246IHN0cmluZyA9ICIwMTowMDowMCI7CgogIGxldCBsb2FkaW5nID0gZmFsc2U7CgogIG9uTW91bnQoYXN5bmMgKCkgPT4gewogICAgbG9hZGluZyA9IHRydWU7CgogICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpOwoKICAgIGxldCBrdW5kZUlucHV0ID0gZG9jdW1lbnQKICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3BsYWNlaG9sZGVyPSJrdW5kZSJdJykKICAgICAgPy5jbG9zZXN0KCIuc3ZlbHRlLXNlbGVjdCIpOwoKICAgIGxldCBldnQgPSBuZXcgUG9pbnRlckV2ZW50KCJwb2ludGVydXAiKTsKICAgIGt1bmRlSW5wdXQ/LmRpc3BhdGNoRXZlbnQoZXZ0KTsKICAgIGxvYWRpbmcgPSBmYWxzZTsKICB9KTsKCiAgY29uc3QgaXNVc2VyVHJhaW5lciA9ICgpID0+IHsKICAgIC8vIFRPRE86IHNlbmQgYSByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kIHRvIHZlcmlmeSBpZiB0aGUgdG9rZW4gaXMgdmFsaWQKICAgIHJldHVybiAoCiAgICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpIHx8IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoInRva2VuIikKICAgICk7CiAgfTsKCiAgJDogc2NoZW1hID0gewogICAgLi4uc2NoZW1hLAogICAgImZpZWxkLXByb3BlcnRpZXMiOiB7CiAgICAgIC4uLnNjaGVtYVsiZmllbGQtcHJvcGVydGllcyJdLAogICAgICAiaGlkZGVuLWZpZWxkcyI6IFsiaW52b2ljZWRJbiIsICJpbnZvaWNlSnNvbiIsICJhcmNoaXZlZCJdLAogICAgICAiZmllbGQtb3JkZXIiOiBbCiAgICAgICAgImRhdHVtIiwKICAgICAgICAic3RhcnR6ZWl0IiwKICAgICAgICAidHJhaW5pbmdzZGF1ZXIiLAogICAgICAgICJ0cmFpbmVyIiwKICAgICAgICAicGxhdHoiLAogICAgICAgICJ0cmFpbmluZ1R5cGUiLAogICAgICAgICJrdW5kZSIsCiAgICAgICAgImdydXBwZSIsCiAgICAgICAgIm5vdGl6ZW4iLAogICAgICAgICJuYWNoaG9sdGVybWluIiwKICAgICAgICAicHJvYmV0cmFpbmluZyIsCiAgICAgICAgImFyY2hpdmVkIiwKICAgICAgICAiaW52b2ljZWRJbiIsCiAgICAgICAgImludm9pY2VKc29uIiwKICAgICAgXSwKICAgICAgImJvb2xlYW4tZmllbGRzIjogWyJwcm9iZXRyYWluaW5nIiwgIm5hY2hob2x0ZXJtaW4iLCAiYXJjaGl2ZWQiXSwKCiAgICAgICJkZWZhdWx0LXZhbHVlcyI6IFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAiaW52b2ljZWRJbiIsCiAgICAgICAgICB2YWx1ZTogbnVsbCwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJ0cmFpbmVySWQiLAogICAgICAgICAgdmFsdWU6IHNhdmVkVHJhaW5lci52YWx1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICJkYXR1bSIsCiAgICAgICAgICB2YWx1ZTogZGF5anMoc2VsZWN0ZWREYXRlKS5mb3JtYXQoIllZWVktTU0tREQiKS5zdWJzdHIoMCwgMTApLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInN0YXJ0emVpdCIsCiAgICAgICAgICB2YWx1ZTogZGF5anMoc2VsZWN0ZWRTdGFydFRpbWUpLmlzVmFsaWQoKQogICAgICAgICAgICA/IGRheWpzKHNlbGVjdGVkU3RhcnRUaW1lKS5mb3JtYXQoIkhIOm1tIikKICAgICAgICAgICAgOiBkYXlqcygpLmZvcm1hdCgiSEgiKSArICI6MDAiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInRyYWluaW5nc2RhdWVyIiwKICAgICAgICAgIHZhbHVlOiBzZWxlY3RlZER1cmF0aW9uLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInRyYWluaW5nVHlwZSIsCiAgICAgICAgICB2YWx1ZTogInByaXZhdGUiLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInBsYXR6SWQiLAogICAgICAgICAgdmFsdWU6IDEsIC8vcHJlc2VsZWN0IHBsYXR6IGZpZWxkIHdpdGggb25lIG9mIHRoZSB2YWx1ZXMKICAgICAgICB9LAogICAgICBdLAogICAgICAicmVsYXRpb25hbC1maWVsZHMiOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogImt1bmRlIiwKICAgICAgICAgIHR5cGU6ICJGQVZPUklURSIsCiAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSwKICAgICAgICAgIHVzZUZ1enp5U2VhcmNoOiB0cnVlLAogICAgICAgICAgY29sdW1uczogWwogICAgICAgICAgICAiaWQiLAogICAgICAgICAgICAiYmV4aW9JZCIsCiAgICAgICAgICAgICJuYW1lIiwKICAgICAgICAgICAgInZvcm5hbWUiLAogICAgICAgICAgICAib3J0IiwKICAgICAgICAgICAgImdlYnVydHN0YWciLAogICAgICAgICAgICAicGhvbmUiLAogICAgICAgICAgICAicGhvbmVNb2JpbGUiLAogICAgICAgICAgICAibm90aXplbiIsCiAgICAgICAgICBdLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogInRyYWluZXIiLAogICAgICAgICAgZWRpdGFibGU6ICFpc1VzZXJUcmFpbmVyKCksCiAgICAgICAgICBjb2x1bW5zOiBbImlkIiwgIm5hbWUiLCAidm9ybmFtZSIsICJlbWFpbCJdLAogICAgICAgICAgZHJvcERvd25GaWx0ZXI6IHsKICAgICAgICAgICAgYWt0aXY6IHRydWUsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIC8vcmVhZG9ubHkgYW5kIGN1c3RvbS12YWxpZGF0aW9uIGFwcGx5IGlmIHRoZSB1c2VyIGlzIGEgdHJhaW5lcgogICAgICAicmVhZG9ubHktZmllbGRzIjogaXNVc2VyVHJhaW5lcigpID8gWyJ0cmFpbmVyIl0gOiBbXSwKICAgICAgImN1c3RvbS12YWxpZGF0aW9ucyI6IGlzVXNlclRyYWluZXIoKQogICAgICAgID8gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJ0cmFpbmluZ3NkYXVlciIsCiAgICAgICAgICAgICAgdmFsaWRhdGlvbjogewogICAgICAgICAgICAgICAgbWVzc2FnZTogIlRyYWluaW5nc2RhdWVyIGNhbid0IGJlIGVtcHR5IiwKICAgICAgICAgICAgICAgIHJlZ2V4OiAiLipcXFMuKiIsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgIGZpZWxkOiAidHJhaW5lciIsCiAgICAgICAgICAgICAgdmFsaWRhdGlvbjogewogICAgICAgICAgICAgICAgbWVzc2FnZTogIlRyYWluZXIgY2FuJ3QgYmUgZW1wdHkiLAogICAgICAgICAgICAgICAgcmVnZXg6ICIuKlxcUy4qIiwKICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgXQogICAgICAgIDogWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgZmllbGQ6ICJ0cmFpbmVyIiwKICAgICAgICAgICAgICB2YWxpZGF0aW9uOiB7CiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVHJhaW5lciBjYW4ndCBiZSBlbXB0eSIsCiAgICAgICAgICAgICAgICByZWdleDogIi4qXFxTLioiLAogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICBdLAogICAgfSwKICB9Owo8L3NjcmlwdD4KCnsjaWYgbG9hZGluZ30KICA8ZGl2CiAgICBjbGFzcz0iZml4ZWQgei0xMCBpbnNldC0wIG92ZXJmbG93LXktYXV0byBiZy1ibGFjayBiZy1vcGFjaXR5LTUwIgogICAgYXJpYS1sYWJlbGxlZGJ5PSJtb2RhbC10aXRsZSIKICAgIHJvbGU9ImRpYWxvZyIKICAgIGFyaWEtbW9kYWw9InRydWUiCiAgPgogICAgPGRpdiBjbGFzcz0iZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgaC1bNzB2aF0iPgogICAgICA8ZGl2CiAgICAgICAgY2xhc3M9ImFuaW1hdGUtc3BpbiByb3VuZGVkLWZ1bGwgaC0zMiB3LTMyIGJvcmRlci10LTIgYm9yZGVyLWItMiBib3JkZXItZ3JheS05MDAiCiAgICAgID48L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2Pgp7L2lmfQoKPGRpdiBjbGFzcz0iYmctd2hpdGUgcC00IHctWzk1JV0gcm91bmRlZC1zbSI+CiAgPGRpdiBjbGFzcz0idGV4dC1yaWdodCBwYi00Ij4KICAgIDxidXR0b24KICAgICAgY2xhc3M9InRleHQtY2VudGVyIHB5LTMgcHgtNiBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1hbGwgZm9udC1zZW1pYm9sZCByb3VuZGVkLWZ1bGwgaC04IHctOCAhcC0wIHRleHQtbGciCiAgICAgIG9uOmNsaWNrPXtjbG9zZVBvcHVwfQogICAgPgogICAgICA8c3ZnCiAgICAgICAgd2lkdGg9IjI0IgogICAgICAgIGhlaWdodD0iMjQiCiAgICAgICAgdmlld0JveD0iMCAwIDI0IDI0IgogICAgICAgIGZpbGw9Im5vbmUiCiAgICAgICAgc3Ryb2tlPSJjdXJyZW50Q29sb3IiCiAgICAgICAgc3Ryb2tlLXdpZHRoPSIyIgogICAgICAgIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIKICAgICAgICBzdHJva2UtbGluZWpvaW49InJvdW5kIgogICAgICAgIGNsYXNzPSJoLTUgdy01IGlubGluZS1ibG9jayIKICAgICAgICA+PGxpbmUgeDE9IjE4IiB5MT0iNiIgeDI9IjYiIHkyPSIxOCIgLz48bGluZQogICAgICAgICAgeDE9IjYiCiAgICAgICAgICB5MT0iNiIKICAgICAgICAgIHgyPSIxOCIKICAgICAgICAgIHkyPSIxOCIKICAgICAgICAvPjwvc3ZnCiAgICAgID4KICAgIDwvYnV0dG9uPgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJvdmVyZmxvdy1hdXRvIG1heC1oLVs3MCVdIj4KICAgIDxDcmVhdGVFdmVudCB7c2NoZW1hfSBvblN1Y2Nlc3M9e2Nsb3NlUG9wdXB9IC8+CiAgPC9kaXY+CjwvZGl2Pgo=
      - name: calendar
        content: PHNjcmlwdCBsYW5nPSJ0cyI+CiAgaW1wb3J0IEZ1bGxDYWxlbmRhciwgewogICAgQ2FsZW5kYXJPcHRpb25zLAogICAgRGF5Q2VsbENvbnRlbnRBcmcsCiAgICBWaWV3QXBpLAogIH0gZnJvbSAic3ZlbHRlLWZ1bGxjYWxlbmRhciI7CgogIGltcG9ydCBkYXlncmlkUGx1Z2luIGZyb20gIkBmdWxsY2FsZW5kYXIvZGF5Z3JpZCI7CiAgaW1wb3J0IGludGVyYWN0aW9uUGx1Z2luIGZyb20gIkBmdWxsY2FsZW5kYXIvaW50ZXJhY3Rpb24iOyAvLyBmb3Igc2VsZWN0YWJsZQogIGltcG9ydCBHbG9iYWwgZnJvbSAiLi4vY29tcG9uZW50cy9nbG9iYWwuc3ZlbHRlIjsKICBHbG9iYWw7CiAgaW1wb3J0IHsgb25Nb3VudCwgdGljayB9IGZyb20gInN2ZWx0ZSI7CiAgaW1wb3J0IGRheWpzIGZyb20gImRheWpzIjsKICBpbXBvcnQgU2luZ2xlRGF5IGZyb20gIi4vc2luZ2xlRGF5LnN2ZWx0ZSI7CiAgaW1wb3J0IFRyYWluZXJEcm9wRG93biBmcm9tICIuL3RyYWluZXJEcm9wRG93bi5zdmVsdGUiOwogIGltcG9ydCBDcmVhdGVFdmVudCBmcm9tICIuL2NyZWF0ZUV2ZW50LnN2ZWx0ZSI7CiAgaW1wb3J0IFVwZGF0ZUV2ZW50IGZyb20gIi4vdXBkYXRlRXZlbnQuc3ZlbHRlIjsKICBpbXBvcnQgeyBhZGRNZXNzYWdlcywgaW5pdCB9IGZyb20gInN2ZWx0ZS1pMThuIjsKICBpbXBvcnQgZW4gZnJvbSAiLi4vLi4vaTE4bi90cmFuc2xhdGlvbi5qc29uIjsKCiAgaW1wb3J0IFRvYXN0c0NvbXBvbmVudCBmcm9tICIuLi9jb21wb25lbnRzL3RvYXN0cy1jb21wb25lbnQuc3ZlbHRlIjsKICBpbXBvcnQgeyBjbGVhckFsbFRvYXN0cyB9IGZyb20gIi4uL3N0b3Jlcy90b2FzdHMiOwoKICBpbXBvcnQgU2ltcGxlRGlzbWlzc01vZGFsIGZyb20gIi4uL2NvbXBvbmVudHMvX3NoYXJlZC9tb2RhbC9zaW1wbGUtZGlzbWlzcy1tb2RhbC5zdmVsdGUiOwoKICBjbGVhckFsbFRvYXN0cygpOwoKICBhZGRNZXNzYWdlcygiZW4iLCBlbik7CgogIGluaXQoewogICAgZmFsbGJhY2tMb2NhbGU6ICJlbiIsCiAgICBpbml0aWFsTG9jYWxlOiAiZW4iLAogIH0pOwoKICBsZXQgaW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoOwogIGxldCBldmVudHM6IHsgc3RhcnQ6IHN0cmluZyB9W10gPSBbXTsKICBsZXQgc2VsZWN0ZWRSYXBwb3J0czogYW55ID0gW107CiAgbGV0IHNlbGVjdGVkRGF0ZTogc3RyaW5nID0gZGF5anMoKS5mb3JtYXQoKTsKICBsZXQgc2VsZWN0ZWRTdGFydFRpbWU6IHN0cmluZyA9ICIiOwogIGxldCByYXBwb3J0VG9VcGRhdGVJZDogc3RyaW5nID0gIiI7CgogIGxldCBvcHRpb25zOiBDYWxlbmRhck9wdGlvbnMgPSB7CiAgICBpbml0aWFsVmlldzogImRheUdyaWRNb250aCIsCiAgICBwbHVnaW5zOiBbZGF5Z3JpZFBsdWdpbiwgaW50ZXJhY3Rpb25QbHVnaW5dLAogICAgZmlyc3REYXk6IDEsCiAgICBoZWlnaHQ6ICIxMDAlIiwKICB9OwoKICBleHBvcnQgbGV0IHNjaGVtYTogYW55ID0ge307CgogIC8vIGNoYW5nZSBzaG93Q2FsIHZhbHVlIGJhc2VkIG9uIHdpbmRvdyBzaXplIGFuZCByZXJlbmRlciBjYWxlbmRhcgogICQ6IGlmIChpbm5lcldpZHRoID4gNzY4KSB7CiAgICBzaG93Q2FsID0gdHJ1ZTsKICB9CiAgJDogaWYgKGlubmVyV2lkdGggPCA3NjgpIHsKICAgIHNob3dDYWwgPSBmYWxzZTsKICB9CgogIC8vIG9uIGlubmVyV2lkdGggY2hhbmdlLCBjaGFuZ2Ugb3B0aW9ucyBhbmQgcmVyZW5kZXIgY2FsZW5kYXIKICAkOiB7CiAgICBpbm5lcldpZHRoOwogICAgb3B0aW9ucyA9IHsKICAgICAgLi4ub3B0aW9ucywKICAgIH07CiAgfQogICQ6IHsKICAgIHNob3dDYWw7CiAgICBvcHRpb25zID0gewogICAgICAuLi5vcHRpb25zLAogICAgfTsKICB9CgogIGxldCBzaG93Q3JlYXRlRm9ybSA9IGZhbHNlOwogIGxldCBzaG93RWRpdEZvcm0gPSBmYWxzZTsKICBsZXQgc2hvd0NhbCA9IGZhbHNlOwogIGxldCBzZWxlY3RlZER1cmF0aW9uOiBzdHJpbmcgPSAiIjsKICBsZXQgc2hvd1ZpZXdGcm9tID0gZmFsc2U7CgogIGxldCBzZWxlY3RlZFRyYWluZXI6IGFueSA9ICIiOwoKICBsZXQgVVJMID0gYCR7cHJvY2Vzcy5lbnYuU1ZFTFRFX0FQUF9SRU1PVEVfVVJMfS9hcGkvcmFwcG9ydHM/ZmlsdGVyPXsiaW5jbHVkZSI6WyJ0cmFpbmVyIiwicGxhdHoiLCJrdW5kZSIsImdydXBwZSJdfWA7CgogIGxldCB1cGRhdGVSYXBwb3J0cyA9IGFzeW5jICgpID0+IHsKICAgIC8vIGdldCB0aGUgbGlzdCBvZiByYXBwb3J0cyBmb3IgdGhlIHNlbGVjdGVkIHRyYWluZXIKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0cmFpbmVyIiwgSlNPTi5zdHJpbmdpZnkoc2VsZWN0ZWRUcmFpbmVyKSk7CgogICAgaWYgKHNlbGVjdGVkVHJhaW5lcj8udmFsdWUpIHsKICAgICAgVVJMID0gYCR7cHJvY2Vzcy5lbnYuU1ZFTFRFX0FQUF9SRU1PVEVfVVJMfS9hcGkvcmFwcG9ydHM/ZmlsdGVyPXsiaW5jbHVkZSI6WyJ0cmFpbmVyIiwicGxhdHoiLCJrdW5kZSIsImdydXBwZSJdLCJ3aGVyZSI6eyJ0cmFpbmVySWQiOiR7c2VsZWN0ZWRUcmFpbmVyLnZhbHVlfX19YDsKICAgIH0gZWxzZSB7CiAgICAgIFVSTCA9IGAke3Byb2Nlc3MuZW52LlNWRUxURV9BUFBfUkVNT1RFX1VSTH0vYXBpL3JhcHBvcnRzP2ZpbHRlcj17ImluY2x1ZGUiOlsidHJhaW5lciIsInBsYXR6Iiwia3VuZGUiLCJncnVwcGUiXX1gOwogICAgfQoKICAgIGxldCByYXBwb3J0cyA9IGF3YWl0IGZldGNoKFVSTCk7CgogICAgY29uc3QgZGF0YSA9IGF3YWl0IHJhcHBvcnRzLmpzb24oKTsKCiAgICBldmVudHMgPSBkYXRhLm1hcCgocjogYW55KSA9PiAoewogICAgICBzdGFydDogZGF5anMoci5kYXR1bSkuZm9ybWF0KCJZWVlZLU1NLUREIiksCiAgICAgIGRpc3BsYXk6ICJiYWNrZ3JvdW5kIiwKICAgICAgYmFja2dyb3VuZENvbG9yOiAiI2ZhNzI1MiIsCiAgICB9KSk7CgogICAgLy8gdXBkYXRlIGNhbGVuZGFyIG9wdGlvbnMgdG8gcmVuZGVyIHRoZSB1cGRhdGVkIGV2ZW50cwogICAgb3B0aW9ucyA9IHsKICAgICAgLi4ub3B0aW9ucywKICAgICAgZXZlbnRzOiBldmVudHMsCiAgICB9OwoKICAgIGlmIChzZWxlY3RlZERhdGUpIHsKICAgICAgc2VsZWN0ZWRSYXBwb3J0cyA9IGRhdGEuZmlsdGVyKChyOiBhbnkpID0+IHsKICAgICAgICByZXR1cm4gKAogICAgICAgICAgZGF5anMoci5kYXR1bSkuZm9ybWF0KCJZWVlZLU1NLUREIikgPT0KICAgICAgICAgIGRheWpzKHNlbGVjdGVkRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIikKICAgICAgICApOwogICAgICB9KTsKICAgICAgc2VsZWN0ZWRSYXBwb3J0cyA9IHNlbGVjdGVkUmFwcG9ydHM7CiAgICB9CiAgfTsKCiAgbGV0IGZldGNoUmFwcG9ydCA9IGFzeW5jICgpID0+IHsKICAgIC8vIHJlcXVlc3QgZm9yIHRoZSBsaXN0IG9mIHJhcG9ydHMgZm9yIHRoYXQgbW9udGggcG9wdWxhdGUgaXQgaW4gdGhlIGNhbGVuZGFyCiAgICBsZXQgc2F2ZWRUcmFpbmVyOiB7CiAgICAgIHZhbHVlOiBudW1iZXI7CiAgICAgIGxhYmVsOiBzdHJpbmc7CiAgICB9ID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidHJhaW5lciIpIHx8ICJ7fSIpOwoKICAgIGlmIChzYXZlZFRyYWluZXI/LnZhbHVlKSB7CiAgICAgIFVSTCA9IGAke3Byb2Nlc3MuZW52LlNWRUxURV9BUFBfUkVNT1RFX1VSTH0vYXBpL3JhcHBvcnRzP2ZpbHRlcj17ImluY2x1ZGUiOlsidHJhaW5lciIsInBsYXR6Iiwia3VuZGUiLCJncnVwcGUiXSwid2hlcmUiOnsidHJhaW5lcklkIjoke3NhdmVkVHJhaW5lci52YWx1ZX19fWA7CiAgICB9IGVsc2UgewogICAgICBVUkwgPSBgJHtwcm9jZXNzLmVudi5TVkVMVEVfQVBQX1JFTU9URV9VUkx9L2FwaS9yYXBwb3J0cz9maWx0ZXI9eyJpbmNsdWRlIjpbInRyYWluZXIiLCJwbGF0eiIsImt1bmRlIiwiZ3J1cHBlIl19YDsKICAgIH0KCiAgICBsZXQgcmFwcG9ydHMgPSBhd2FpdCBmZXRjaChVUkwpOwogICAgYXdhaXQgdGljaygpOwoKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByYXBwb3J0cy5qc29uKCk7CgogICAgZXZlbnRzID0gZGF0YS5tYXAoKHI6IGFueSkgPT4gKHsKICAgICAgc3RhcnQ6IGRheWpzKHIuZGF0dW0pLmZvcm1hdCgiWVlZWS1NTS1ERCIpLAogICAgICBkaXNwbGF5OiAiYmFja2dyb3VuZCIsCiAgICAgIGJhY2tncm91bmRDb2xvcjogIiNmYTcyNTIiLCAvL2FjY2VudCBjb2xvciBmb3IgdGhlIGNhbGVuZGFyCiAgICB9KSk7CgogICAgc2VsZWN0ZWRSYXBwb3J0cyA9IGRhdGEuZmlsdGVyKChyOiBhbnkpID0+IHsKICAgICAgcmV0dXJuICgKICAgICAgICBkYXlqcyhyLmRhdHVtKS5mb3JtYXQoIllZWVktTU0tREQiKSA9PQogICAgICAgIGRheWpzKHNlbGVjdGVkRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIikKICAgICAgKTsKICAgIH0pOwoKICAgIG9wdGlvbnMgPSB7CiAgICAgIC4uLm9wdGlvbnMsCiAgICAgIGV2ZW50czogZXZlbnRzLAogICAgICBldmVudENsaWNrOiBhc3luYyBmdW5jdGlvbiAoaW5mbzogYW55KSB7CiAgICAgICAgc2VsZWN0ZWREYXRlID0gZGF5anMoaW5mby5ldmVudC5zdGFydCkuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgYXdhaXQgdXBkYXRlUmFwcG9ydHMoKTsKICAgICAgICAvLyBoaWRlIHRoZSBjYWxlbmRhcgogICAgICAgIHNob3dDYWwgPSBmYWxzZTsKICAgICAgfSwKICAgICAgZGF0ZUNsaWNrOiBmdW5jdGlvbiAoaW5mbzogYW55KSB7CiAgICAgICAgc2VsZWN0ZWREYXRlID0gZGF5anMoaW5mby5kYXRlU3RyKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICBzaG93Q2FsID0gZmFsc2U7CiAgICAgIH0sCiAgICAgIGRheUNlbGxDbGFzc05hbWVzOiAoYXJnOiBEYXlDZWxsQ29udGVudEFyZykgPT4gewogICAgICAgIGlmICgKICAgICAgICAgIGRheWpzKHNlbGVjdGVkRGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIikgPT09CiAgICAgICAgICBkYXlqcyhhcmcuZGF0ZSkuZm9ybWF0KCJZWVlZLU1NLUREIikKICAgICAgICApIHsKICAgICAgICAgIHJldHVybiBbInNlbGVjdGVkLWRheS1jZWxsIl07CiAgICAgICAgfQogICAgICAgIHJldHVybiAiIjsKICAgICAgfSwKICAgICAgZmlyc3REYXk6IDEsCgogICAgICB3aW5kb3dSZXNpemU6IChpbmZvOiB7IHZpZXc6IFZpZXdBcGkgfSkgPT4gewogICAgICAgIGluZm8udmlldy5jYWxlbmRhci51cGRhdGVTaXplKCk7CiAgICAgIH0sCiAgICAgIGhhbmRsZVdpbmRvd1Jlc2l6ZTogdHJ1ZSwKICAgIH07CiAgfTsKICAkOiB7CiAgICBzZWxlY3RlZERhdGU7CiAgICBmZXRjaFJhcHBvcnQoKTsKICB9CiAgb25Nb3VudCgoKSA9PiB7CiAgICBmZXRjaFJhcHBvcnQoKTsKICAgIGZldGNoVHJhaW5lckZyb21Ub2tlbigpOwogIH0pOwoKICAvLyByZS1leGVjdXRlIHRoZSBmZXRjaFJhcHBvcnQgZnVuY3Rpb24gZXZlcnkgdGltZSBzaG93Q3JlYXRlRm9ybSBhbmQgc2hvd0VkaXRGb3JtIGlzIGZhbHNlCiAgJDogewogICAgaWYgKAogICAgICBzaG93Q3JlYXRlRm9ybSA9PT0gZmFsc2UgJiYKICAgICAgc2hvd0VkaXRGb3JtID09PSBmYWxzZSAmJgogICAgICBzaG93Q3JlYXRlRm9ybSA9PT0gZmFsc2UKICAgICkgewogICAgICBmZXRjaFJhcHBvcnQoKTsKICAgIH0KICB9CgogIGxldCBjbG9zZUNvbmZpcm1hdGlvbiA9IGZhbHNlOwoKICBsZXQgdW5zYXZlZENoYW5nZXMgPSBmYWxzZTsKCiAgbGV0IGVzY0Z1bmN0aW9uID0gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSA9PiB7CiAgICBpZiAoZXZlbnQua2V5ID09PSAiRXNjYXBlIikgewogICAgICBpZiAodW5zYXZlZENoYW5nZXMpIHsKICAgICAgICBjbG9zZUNvbmZpcm1hdGlvbiA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2hvd0NyZWF0ZUZvcm0gPSBmYWxzZTsKICAgICAgICBzaG93RWRpdEZvcm0gPSBmYWxzZTsKICAgICAgfQogICAgfQogIH07CgogIC8vIGxpc3RlbiBmb3IgYW55IGlucHV0IGNoYW5nZXMgYW5kIHNldCB0aGUgdW5zYXZlZENoYW5nZXMgdG8gdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGNoYW5nZXMKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigiaW5wdXQiLCAoKSA9PiB7CiAgICB1bnNhdmVkQ2hhbmdlcyA9IHRydWU7CiAgfSk7CgogIC8vIGxpc3RlbiBmb3IgYW55IHNlbGVjdCBvcHRpb25zIGNoYW5nZSBhbmQgc2V0IHRoZSB1bnNhdmVkQ2hhbmdlcyB0byB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgY2hhbmdlcwogIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoKSA9PiB7CiAgICB1bnNhdmVkQ2hhbmdlcyA9IHRydWU7CiAgfSk7CgogICQ6IHsKICAgIGNvbnN0IHNlbGVjdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgic2VsZWN0Iik7CgogICAgZm9yIChsZXQgc2VsZWN0IG9mIHNlbGVjdHMpIHsKICAgICAgc2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoImNoYW5nZSIsICgpID0+IHsKICAgICAgICB1bnNhdmVkQ2hhbmdlcyA9IHRydWU7CiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gbGlzdGVuIGZvciBhbnkgc3VibWl0IGNoYW5nZXMgYW5kIHNldCB0aGUgdW5zYXZlZENoYW5nZXMgdG8gZmFsc2UKICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigic3VibWl0IiwgKCkgPT4gewogICAgdW5zYXZlZENoYW5nZXMgPSBmYWxzZTsKICB9KTsKCiAgLy8gbGlzdGVuIGZvciBlc2Mga2V5IHByZXNzIGFuZCBjbG9zZSB0aGUgY29uZmlybWF0aW9uIG1vZGFsCiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCBlc2NGdW5jdGlvbiwgZmFsc2UpOwoKICAvKioKICAgKiBzZWxlY3RlZCB0cmFpbmVyIGNvbnRhaW5zIHZhbHVlIGFuZCBsYWJlbCBvZiB0aGUgc2VsZWN0ZWQgdHJhaW5lcgogICAqICoqLwoKICAvLyBjaGVjayBpZiB0aGUgY3VycmVudCB1cmwgaXMgaW4gdGhlIC9hZG1pbiBwYXRoIGFuZCBpZiBpdCBpcyB0aGVuIHNob3cgdGhlIGFkbWluIG1lbnUKICAvLyBUT0RPOiBhZGQgYSBwcm9wZXIgY2hlY2sgZm9yIHRoZSBhZG1pbiB1c2VyCiAgbGV0IGlzQWRtaW4gPSBmYWxzZTsKICAkOiB7CiAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluY2x1ZGVzKCIvYWRtaW4iKSkgewogICAgICBpc0FkbWluID0gdHJ1ZTsKICAgIH0KICB9CgogIC8vICBnZXQgdGhlIGN1cnJlbnQgdXJsIHNlYXJjaCBxdWVyeSBhbmQgY2hlY2sgZm9yIHRyYWluZXIgYW5kIHRyYWluZXJOYW1lIHF1ZXJ5IHN0cmluZ3MKCiAgbGV0IHRyYWluZXJJZDogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkOwogIGxldCB0cmFpbmVyTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkOwogIC8vIGdldCB0b2tlbiBmcm9tIGxvY2FsIHN0b3JhZ2UKICAvLyBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAvLyB0aGVuIGZldGNoIHRyYWluZXIgZGF0YSB3aGVyZSB0b2tlbiBpcyBlcXVhbCB0byB0aGUgdG9rZW4gaW4gdGhlIGxvY2FsIHN0b3JhZ2UKICBjb25zdCBmZXRjaFRyYWluZXJGcm9tVG9rZW4gPSBhc3luYyAoKSA9PiB7CiAgICBsZXQgdG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKTsKICAgIGxldCB0cmFpbmVyID0gYXdhaXQgZmV0Y2goCiAgICAgIGAke3Byb2Nlc3MuZW52LlNWRUxURV9BUFBfUkVNT1RFX1VSTH0vYXBpL3RyYWluZXJzP2ZpbHRlcj17IndoZXJlIjp7InRva2VuIjoiJHt0b2tlbn0ifX1gCiAgICApOwogICAgYXdhaXQgdGljaygpOwoKICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0cmFpbmVyLmpzb24oKTsKCiAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgIHRyYWluZXJJZCA9IGRhdGFbMF0uaWQ7CiAgICAgIHRyYWluZXJOYW1lID0gZGF0YVswXS5uYW1lOwogICAgfQogIH07CgogICQ6IHsKICAgIGlmICh0cmFpbmVySWQgJiYgdHJhaW5lck5hbWUpIHsKICAgICAgc2VsZWN0ZWRUcmFpbmVyID0gewogICAgICAgIHZhbHVlOiB0cmFpbmVySWQsCiAgICAgICAgbGFiZWw6IHRyYWluZXJOYW1lLAogICAgICB9OwogICAgICB1cGRhdGVSYXBwb3J0cygpOwogICAgfQogIH0KICBhc3luYyBmdW5jdGlvbiBjaGVja0lmVHJhaW5pbmdFZGl0YWJsZSgKICAgIHRyYWluaW5nRGF0ZTogRGF0ZSwKICAgIGlzQWRtaW46IGJvb2xlYW4sCiAgICBpc0FyY2hpdmVkPzogYm9vbGVhbiwKICAgIGludm9pY2VkSW4/OiBib29sZWFuCiAgKTogUHJvbWlzZTxib29sZWFuPiB7CiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7CiAgICBjb25zdCBkZWFkbGluZSA9IG5ldyBEYXRlKHRyYWluaW5nRGF0ZSk7CiAgICBkZWFkbGluZS5zZXREYXRlKHRyYWluaW5nRGF0ZS5nZXREYXRlKCkgKyAxKTsKICAgIGRlYWRsaW5lLnNldEhvdXJzKDE0LCAwLCAwLCAwKTsKCiAgICBpZiAoaXNBZG1pbikgewogICAgICBpZiAoaXNBcmNoaXZlZCB8fCBpbnZvaWNlZEluKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogZmV0Y2ggdGhlIGRhdGEgZnJvbSAvYXBpL2ludm9pY2UtZ2VuZXJhdGlvbi1jb25maWdzLzMKICAgICAgICAgKiBjaGVjayBpZiBkYXRhLmNvbmZpZ1ZhbHVlIGlzIHRydWUgb3IgZmFsc2UgYW5kIHJldHVybiB0aGUgdmFsdWUKICAgICAgICAgKiB0aGlzIGlzIHRvIGNoZWNrIGlmIGhpc3RvcnkgaXMgZWRpdGFibGUgZm9yIHRoZSBhZG1pbgogICAgICAgICAqIG5ldyBoaXN0b3J5IHNob3VsZCBub3QgYmUgZWRpdGFibGUKICAgICAgICAgKiovCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgKICAgICAgICAgIGAke3Byb2Nlc3MuZW52LlNWRUxURV9BUFBfUkVNT1RFX1VSTH0vYXBpL2ludm9pY2UtZ2VuZXJhdGlvbi1jb25maWdzLzNgCiAgICAgICAgKTsKICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOwoKICAgICAgICByZXR1cm4gZGF0YS5jb25maWdWYWx1ZSA9PT0gInRydWUiID8gZmFsc2UgOiB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gY3VycmVudERhdGUgPCBkZWFkbGluZTsKICAgIH0KICB9Cjwvc2NyaXB0PgoKPHN2ZWx0ZTp3aW5kb3cgYmluZDppbm5lcldpZHRoIC8+Cgp7I2lmIGNsb3NlQ29uZmlybWF0aW9uICYmIChzaG93Q3JlYXRlRm9ybSB8fCBzaG93RWRpdEZvcm0gfHwgc2hvd1ZpZXdGcm9tKX0KICA8U2ltcGxlRGlzbWlzc01vZGFsCiAgICBvbjpjbG9zZT17KCkgPT4gKGNsb3NlQ29uZmlybWF0aW9uID0gZmFsc2UpfQogICAgb246c2Vjb25kYXJ5PXsoKSA9PiAoY2xvc2VDb25maXJtYXRpb24gPSBmYWxzZSl9CiAgICBvbjphY3RpdmU9eygpID0+IHsKICAgICAgY2xvc2VDb25maXJtYXRpb24gPSBmYWxzZTsKICAgICAgc2hvd0NyZWF0ZUZvcm0gPSBmYWxzZTsKICAgICAgc2hvd0VkaXRGb3JtID0gZmFsc2U7CiAgICAgIHNob3dWaWV3RnJvbSA9IGZhbHNlOwogICAgICB1bnNhdmVkQ2hhbmdlcyA9IGZhbHNlOwogICAgfX0KICAvPgp7L2lmfQoKeyNpZiBzaG93Q3JlYXRlRm9ybX0KICA8ZGl2CiAgICBjbGFzcz0iZml4ZWQgdy1mdWxsIGgtc2NyZWVuIHotMTAgZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgaW5zZXQtMCBiZy1ncmF5LTUwMCBiZy1vcGFjaXR5LTc1IHRyYW5zaXRpb24tb3BhY2l0eSIKICA+CiAgICA8Q3JlYXRlRXZlbnQKICAgICAge3NjaGVtYX0KICAgICAge3NlbGVjdGVkRGF0ZX0KICAgICAge3NlbGVjdGVkU3RhcnRUaW1lfQogICAgICB7c2VsZWN0ZWREdXJhdGlvbn0KICAgICAgY2xvc2VQb3B1cD17KCkgPT4gewogICAgICAgIC8vIGlmIHVuc2F2ZWQgY2hhbmdlcywgc2hvdyBjb25maXJtYXRpb24gbW9kYWwKICAgICAgICBpZiAodW5zYXZlZENoYW5nZXMpIHsKICAgICAgICAgIGNsb3NlQ29uZmlybWF0aW9uID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc2hvd0NyZWF0ZUZvcm0gPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH19CiAgICAvPgogIDwvZGl2Pgp7L2lmfQoKeyNpZiBzaG93RWRpdEZvcm0gfHwgc2hvd1ZpZXdGcm9tfQogIDxkaXYKICAgIGNsYXNzPSJmaXhlZCB3LWZ1bGwgaC1zY3JlZW4gei0xMCBmbGV4IGp1c3RpZnktY2VudGVyIGl0ZW1zLWNlbnRlciBpbnNldC0wIGJnLWdyYXktNTAwIGJnLW9wYWNpdHktNzUgdHJhbnNpdGlvbi1vcGFjaXR5IgogID4KICAgIDxVcGRhdGVFdmVudAogICAgICB7c2NoZW1hfQogICAgICBpZD17cmFwcG9ydFRvVXBkYXRlSWR9CiAgICAgIG9uOmRlbGV0ZWQ9eygpID0+IHsKICAgICAgICBzaG93RWRpdEZvcm0gPSBmYWxzZTsKICAgICAgfX0KICAgICAgY2xvc2VQb3B1cD17KCkgPT4gewogICAgICAgIGlmICh1bnNhdmVkQ2hhbmdlcykgewogICAgICAgICAgY2xvc2VDb25maXJtYXRpb24gPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzaG93RWRpdEZvcm0gPSBmYWxzZTsKICAgICAgICAgIHNob3dWaWV3RnJvbSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfX0KICAgICAgaXNWaWV3T25seT17c2hvd1ZpZXdGcm9tfQogICAgLz4KICA8L2Rpdj4Key9pZn0KCjxkaXYgY2xhc3M9ImdyaWQgZ3JpZC1jb2xzLTIgcC00IGJnLXByaW1hcnktNTAiPgogIDxkaXY+CiAgICA8IS0tIG9uIG1vYmlsZSB2aWV3IGlmIHVzZXIgaXMgbm90IGFkbWluIGFuZCB0cmFpbmVyIGFuZCB0cmFpbmVyTmFtZSBhcmUgc2V0IGhpZGUgdGhlIHZpZGUgLS0+CiAgICB7I2lmIGlzQWRtaW59CiAgICAgIDxUcmFpbmVyRHJvcERvd24KICAgICAgICBiaW5kOnNlbGVjdGVkVmFsdWU9e3NlbGVjdGVkVHJhaW5lcn0KICAgICAgICBvbjp1cGRhdGVUcmFpbmVyPXt1cGRhdGVSYXBwb3J0c30KICAgICAgLz4KICAgIHsvaWZ9CiAgPC9kaXY+CgogIDxkaXYgY2xhc3M9IiBmbGV4IGp1c3RpZnktZW5kIj4KICAgIDxidXR0b24KICAgICAgY2xhc3M9InJvdW5kZWQtZnVsbCAhYmctcHJpbWFyeS01MDAgaG92ZXI6IWJnLXByaW1hcnktNjAwIHctOCBoLTggZmxleCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIiCiAgICAgIG9uOmNsaWNrPXsoKSA9PiB7CiAgICAgICAgc2hvd0NyZWF0ZUZvcm0gPSAhc2hvd0NyZWF0ZUZvcm07CiAgICAgIH19CiAgICA+CiAgICAgIDxzdmcKICAgICAgICB3aWR0aD0iMjQiCiAgICAgICAgaGVpZ2h0PSIyNCIKICAgICAgICB2aWV3Qm94PSIwIDAgMjQgMjQiCiAgICAgICAgZmlsbD0ibm9uZSIKICAgICAgICBzdHJva2U9IndoaXRlIgogICAgICAgIHN0cm9rZS13aWR0aD0iMiIKICAgICAgICBzdHJva2UtbGluZWNhcD0icm91bmQiCiAgICAgICAgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIKICAgICAgICA+PGxpbmUgeDE9IjEyIiB5MT0iNSIgeDI9IjEyIiB5Mj0iMTkiIC8+PGxpbmUKICAgICAgICAgIHgxPSI1IgogICAgICAgICAgeTE9IjEyIgogICAgICAgICAgeDI9IjE5IgogICAgICAgICAgeTI9IjEyIgogICAgICAgIC8+PC9zdmcKICAgICAgPgogICAgPC9idXR0b24+CiAgPC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0ibWF4LXctN3hsIG14LWF1dG8gcmVsYXRpdmUiPgogIDxkaXYgY2xhc3M9ImdyaWQgbWQ6Z3JpZC1jb2xzLTIgcmVsYXRpdmUiPgogICAgeyNpZiAhc2hvd0NhbH0KICAgICAgPGRpdgogICAgICAgIGNsYXNzPSJtZDpoaWRkZW4gcHgtNCBteC1hdXRvIG10LTQgdy1mdWxsIGZsZXgtY29sIGZsZXggZmxleC13cmFwIHNwYWNlLXktNCIKICAgICAgPgogICAgICAgIDxidXR0b24KICAgICAgICAgIGNsYXNzPSJmYy10b2RheS1idXR0b24gdGV4dC13aGl0ZSBweC00IHNlbGYtY2VudGVyIHB5LTIgcm91bmRlZCIKICAgICAgICAgIG9uOmNsaWNrPXsoKSA9PiB7CiAgICAgICAgICAgIC8vIHNldCBzZWxlY3RlZERhdGUgdG8gdG9kYXkKICAgICAgICAgICAgc2VsZWN0ZWREYXRlID0gZGF5anMoKS5mb3JtYXQoIllZWVktTU0tREQiKTsKICAgICAgICAgIH19PlRvZGF5PC9idXR0b24KICAgICAgICA+CiAgICAgICAgPGRpdgogICAgICAgICAgY2xhc3M9ImZsZXgtMSBmbGV4IGZsZXgtd3JhcCBqdXN0aWZ5LWNlbnRlciBpdGVtcy1jZW50ZXIgc3BhY2UteC0yIgogICAgICAgID4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHsKICAgICAgICAgICAgICBzZWxlY3RlZERhdGUgPSBkYXlqcyhzZWxlY3RlZERhdGUpCiAgICAgICAgICAgICAgICAuc3VidHJhY3QoMiwgImRheSIpCiAgICAgICAgICAgICAgICAuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIGNsYXNzPSJyb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS01MCBwLTMgdGV4dC1wcmltYXJ5LTUwMCIKICAgICAgICAgICAgdGl0bGU9Ii0yIGRheXMgIgogICAgICAgICAgPgogICAgICAgICAgICA8c3ZnCiAgICAgICAgICAgICAgd2lkdGg9IjIwIgogICAgICAgICAgICAgIGhlaWdodD0iMjAiCiAgICAgICAgICAgICAgZmlsbD0iY3VycmVudENvbG9yIgogICAgICAgICAgICAgIGNsYXNzPSJiaSBiaS1jaGV2cm9uLWRvdWJsZS1sZWZ0IgogICAgICAgICAgICAgIHZpZXdCb3g9IjAgMCAxNiAxNiIKICAgICAgICAgICAgPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgICAgICAgICAgICBkPSJNOC4zNTQgMS42NDZhLjUuNSAwIDAgMSAwIC43MDhMMi43MDcgOGw1LjY0NyA1LjY0NmEuNS41IDAgMCAxLS43MDguNzA4bC02LTZhLjUuNSAwIDAgMSAwLS43MDhsNi02YS41LjUgMCAwIDEgLjcwOCAweiIKICAgICAgICAgICAgICAvPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgICAgICAgICAgICBkPSJNMTIuMzU0IDEuNjQ2YS41LjUgMCAwIDEgMCAuNzA4TDYuNzA3IDhsNS42NDcgNS42NDZhLjUuNSAwIDAgMS0uNzA4LjcwOGwtNi02YS41LjUgMCAwIDEgMC0uNzA4bDYtNmEuNS41IDAgMCAxIC43MDggMHoiCiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHsKICAgICAgICAgICAgICBzZWxlY3RlZERhdGUgPSBkYXlqcyhzZWxlY3RlZERhdGUpCiAgICAgICAgICAgICAgICAuc3VidHJhY3QoMSwgImRheSIpCiAgICAgICAgICAgICAgICAuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIGNsYXNzPSJyb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS01MCBwLTMgdGV4dC1wcmltYXJ5LTUwMCIKICAgICAgICAgICAgdGl0bGU9InByZXZpb3VzIGRheSIKICAgICAgICAgID4KICAgICAgICAgICAgPHN2ZwogICAgICAgICAgICAgIHdpZHRoPSIyMCIKICAgICAgICAgICAgICBoZWlnaHQ9IjIwIgogICAgICAgICAgICAgIGZpbGw9ImN1cnJlbnRDb2xvciIKICAgICAgICAgICAgICBjbGFzcz0iYmkgYmktY2hldnJvbi1sZWZ0IgogICAgICAgICAgICAgIHZpZXdCb3g9IjAgMCAxNiAxNiIKICAgICAgICAgICAgPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgICAgICAgICAgICBkPSJNMTEuMzU0IDEuNjQ2YS41LjUgMCAwIDEgMCAuNzA4TDUuNzA3IDhsNS42NDcgNS42NDZhLjUuNSAwIDAgMS0uNzA4LjcwOGwtNi02YS41LjUgMCAwIDEgMC0uNzA4bDYtNmEuNS41IDAgMCAxIC43MDggMHoiCiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgPC9zdmc+CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHsKICAgICAgICAgICAgICBzaG93Q2FsID0gIXNob3dDYWw7CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIGNsYXNzPSJyb3VuZGVkIHAtNCBib3JkZXItMiIKICAgICAgICAgID4KICAgICAgICAgICAge2RheWpzKHNlbGVjdGVkRGF0ZSkuZm9ybWF0KCJERC5NTS5ZWVlZIil9CiAgICAgICAgICA8L2J1dHRvbj4KICAgICAgICAgIDxidXR0b24KICAgICAgICAgICAgb246Y2xpY2s9eygpID0+IHsKICAgICAgICAgICAgICBzZWxlY3RlZERhdGUgPSBkYXlqcyhzZWxlY3RlZERhdGUpCiAgICAgICAgICAgICAgICAuYWRkKDEsICJkYXkiKQogICAgICAgICAgICAgICAgLmZvcm1hdCgiWVlZWS1NTS1ERCIpOwogICAgICAgICAgICB9fQogICAgICAgICAgICBjbGFzcz0icm91bmRlZC1mdWxsIGJnLXByaW1hcnktNTAgcC0zIHRleHQtcHJpbWFyeS01MDAiCiAgICAgICAgICAgIHRpdGxlPSJuZXh0IGRheSIKICAgICAgICAgID4KICAgICAgICAgICAgPHN2ZwogICAgICAgICAgICAgIHdpZHRoPSIyMCIKICAgICAgICAgICAgICBoZWlnaHQ9IjIwIgogICAgICAgICAgICAgIGZpbGw9ImN1cnJlbnRDb2xvciIKICAgICAgICAgICAgICBjbGFzcz0iYmkgYmktY2hldnJvbi1yaWdodCIKICAgICAgICAgICAgICB2aWV3Qm94PSIwIDAgMTYgMTYiCiAgICAgICAgICAgID4KICAgICAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgICAgICAgICAgICAgZD0iTTQuNjQ2IDEuNjQ2YS41LjUgMCAwIDEgLjcwOCAwbDYgNmEuNS41IDAgMCAxIDAgLjcwOGwtNiA2YS41LjUgMCAwIDEtLjcwOC0uNzA4TDEwLjI5MyA4IDQuNjQ2IDIuMzU0YS41LjUgMCAwIDEgMC0uNzA4eiIKICAgICAgICAgICAgICAvPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgICAgPGJ1dHRvbgogICAgICAgICAgICBvbjpjbGljaz17KCkgPT4gewogICAgICAgICAgICAgIHNlbGVjdGVkRGF0ZSA9IGRheWpzKHNlbGVjdGVkRGF0ZSkKICAgICAgICAgICAgICAgIC5hZGQoMiwgImRheSIpCiAgICAgICAgICAgICAgICAuZm9ybWF0KCJZWVlZLU1NLUREIik7CiAgICAgICAgICAgIH19CiAgICAgICAgICAgIGNsYXNzPSJyb3VuZGVkLWZ1bGwgYmctcHJpbWFyeS01MCBwLTMgdGV4dC1wcmltYXJ5LTUwMCIKICAgICAgICAgICAgdGl0bGU9IisyIGRheXMiCiAgICAgICAgICA+CiAgICAgICAgICAgIDxzdmcKICAgICAgICAgICAgICB3aWR0aD0iMjAiCiAgICAgICAgICAgICAgaGVpZ2h0PSIyMCIKICAgICAgICAgICAgICBmaWxsPSJiZy1wcmltYXJ5LTUwMCIKICAgICAgICAgICAgICBjbGFzcz0iZmlsbC1jdXJyZW50IgogICAgICAgICAgICAgIHZpZXdCb3g9IjAgMCAxNiAxNiIKICAgICAgICAgICAgPgogICAgICAgICAgICAgIDxwYXRoCiAgICAgICAgICAgICAgICBmaWxsLXJ1bGU9ImV2ZW5vZGQiCiAgICAgICAgICAgICAgICBkPSJNMy42NDYgMS42NDZhLjUuNSAwIDAgMSAuNzA4IDBsNiA2YS41LjUgMCAwIDEgMCAuNzA4bC02IDZhLjUuNSAwIDAgMS0uNzA4LS43MDhMOS4yOTMgOCAzLjY0NiAyLjM1NGEuNS41IDAgMCAxIDAtLjcwOHoiCiAgICAgICAgICAgICAgLz4KICAgICAgICAgICAgICA8cGF0aAogICAgICAgICAgICAgICAgZmlsbC1ydWxlPSJldmVub2RkIgogICAgICAgICAgICAgICAgZD0iTTcuNjQ2IDEuNjQ2YS41LjUgMCAwIDEgLjcwOCAwbDYgNmEuNS41IDAgMCAxIDAgLjcwOGwtNiA2YS41LjUgMCAwIDEtLjcwOC0uNzA4TDEzLjI5MyA4IDcuNjQ2IDIuMzU0YS41LjUgMCAwIDEgMC0uNzA4eiIKICAgICAgICAgICAgICAvPgogICAgICAgICAgICA8L3N2Zz4KICAgICAgICAgIDwvYnV0dG9uPgogICAgICAgIDwvZGl2PgogICAgICA8L2Rpdj4KICAgIHsvaWZ9CgogICAgPGRpdiBjbGFzcz0iIHtzaG93Q2FsID8gJ2Jsb2NrJyA6ICdoaWRkZW4nfSBtZDpibG9jayBoLVtjYWxjKDEwMHZoLTc0cHgpXSI+CiAgICAgIDxkaXYKICAgICAgICBjbGFzcz0iYWJzb2x1dGUgdG9wLTAgcmlnaHQtMCBsZWZ0LTAgYm90dG9tLTAgc206dmlzaWJsZSBzbTptdC0wIG1kOnJlbGF0aXZlIgogICAgICA+CiAgICAgICAgPEZ1bGxDYWxlbmRhcgogICAgICAgICAge29wdGlvbnN9CiAgICAgICAgICBjbGFzcz0icC00IG1heC13LXNjcmVlbi1sZyBtZDpteC1hdXRvIG1pbi1oLWZ1bGwiCiAgICAgICAgLz4KICAgICAgPC9kaXY+CiAgICA8L2Rpdj4KCiAgICA8ZGl2CiAgICAgIGNsYXNzPSJ7c2VsZWN0ZWREYXRlICYmICFzaG93Q2FsCiAgICAgICAgPyAnYmxvY2snCiAgICAgICAgOiAnaGlkZGVuJ30gbWQ6YmxvY2sgbWQ6aC1bY2FsYygxMDB2aC0yMDBweCldIGgtW2NhbGMoMTAwdmgtMTUwcHgpXSIKICAgID4KICAgICAgPFNpbmdsZURheQogICAgICAgIGJpbmQ6cmFwb3J0cz17c2VsZWN0ZWRSYXBwb3J0c30KICAgICAgICBiaW5kOnNlbGVjdGVkRGF0ZQogICAgICAgIGJpbmQ6c2VsZWN0ZWRUcmFpbmVyCiAgICAgICAgb246ZXZlbnRDbGlja2VkPXthc3luYyAoaW5mbykgPT4gewogICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPQogICAgICAgICAgICBpbmZvLmRldGFpbC5ldmVudC5fZGVmLmV4dGVuZGVkUHJvcHMucmFwcG9ydC5kYXR1bTsKICAgICAgICAgIGNvbnN0IHRyYWluaW5nRGF0ZSA9IG5ldyBEYXRlKGN1cnJlbnREYXRlKTsKICAgICAgICAgIGNvbnN0IGlzRWRpdGFibGUgPSBhd2FpdCBjaGVja0lmVHJhaW5pbmdFZGl0YWJsZSgKICAgICAgICAgICAgdHJhaW5pbmdEYXRlLAogICAgICAgICAgICBpc0FkbWluLAogICAgICAgICAgICAhIWluZm8uZGV0YWlsLmV2ZW50Ll9kZWYuZXh0ZW5kZWRQcm9wcy5yYXBwb3J0LmFyY2hpdmVkLAogICAgICAgICAgICAhIWluZm8uZGV0YWlsLmV2ZW50Ll9kZWYuZXh0ZW5kZWRQcm9wcy5yYXBwb3J0Lmludm9pY2VkSW4KICAgICAgICAgICk7CiAgICAgICAgICBpZiAoaXNFZGl0YWJsZSkgewogICAgICAgICAgICBzaG93RWRpdEZvcm0gPSB0cnVlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2hvd1ZpZXdGcm9tID0gdHJ1ZTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICByYXBwb3J0VG9VcGRhdGVJZCA9IGluZm8uZGV0YWlsLmV2ZW50Ll9kZWYuZXh0ZW5kZWRQcm9wcy5yYXBwb3J0LmlkOwogICAgICAgIH19CiAgICAgICAgb246ZGF0ZVNlbGVjdGVkPXsoaW5mbykgPT4gewogICAgICAgICAgbGV0IHRpbWVEaWZmID0gZGF5anMoaW5mby5kZXRhaWwuZW5kKS5kaWZmKAogICAgICAgICAgICBkYXlqcyhpbmZvLmRldGFpbC5zdGFydCksCiAgICAgICAgICAgICJtaW51dGUiCiAgICAgICAgICApOwoKICAgICAgICAgIC8vIHNlbGVjdGVkRHVyYXRpb24gc2hvdWxkIG9ubHkgYmUgMzAsIDYwLCA5MCwgMTIwIG9ubHkgYXBwcm94aW1hdGUgaXQKICAgICAgICAgIGlmICh0aW1lRGlmZiA8IDc1KSB7CiAgICAgICAgICAgIHRpbWVEaWZmID0gNjA7CiAgICAgICAgICB9IGVsc2UgaWYgKHRpbWVEaWZmIDwgMTA1KSB7CiAgICAgICAgICAgIHRpbWVEaWZmID0gOTA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aW1lRGlmZiA9IDEyMDsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBmb3JtYXQgdGltZURpZmYgdG8gZm9ybWF0ICdoaDptbTpzcycKICAgICAgICAgIHNlbGVjdGVkRHVyYXRpb24gPSBkYXlqcygpCiAgICAgICAgICAgIC5ob3VyKDApCiAgICAgICAgICAgIC5taW51dGUodGltZURpZmYpCiAgICAgICAgICAgIC5zZWNvbmQoMCkKICAgICAgICAgICAgLmZvcm1hdCgiSEg6bW06c3MiKTsKICAgICAgICAgIC8vIEB0cy1pZ25vcmUKICAgICAgICAgIHNlbGVjdGVkU3RhcnRUaW1lID0gaW5mby5kZXRhaWwuc3RhcnRTdHI7CiAgICAgICAgICBzaG93Q3JlYXRlRm9ybSA9IHRydWU7CiAgICAgICAgICAvLyB0b2RvIGF1dG8gZmlsbCB0aGUgc3RhcnQgZGF0ZSBhbmQgZHVyYXRpb24gYnkgY2FsY3VsYXRpbmcgdGhlIGR1cmF0aW9uIHdpdGggc3RhcnQgYW5kIGVuZCBkYXRlCiAgICAgICAgfX0KICAgICAgLz4KICAgIDwvZGl2PgogIDwvZGl2Pgo8L2Rpdj4KCjxUb2FzdHNDb21wb25lbnQgLz4KCjxzdHlsZT4KICAvKiBkZXRhaWxzID4gc3VtbWFyeSB7CiAgICBsaXN0LXN0eWxlOiBub25lOwogIH0KICBkZXRhaWxzID4gc3VtbWFyeTo6LXdlYmtpdC1kZXRhaWxzLW1hcmtlciB7CiAgICBkaXNwbGF5OiBub25lOwogIH0KCiAgZGV0YWlsc1tvcGVuXSBzdW1tYXJ5IH4gKiB7CiAgICBhbmltYXRpb246IHN3ZWVwIDAuMjVzIGVhc2UtaW4tb3V0OwogIH0KCiAgQGtleWZyYW1lcyBzd2VlcCB7CiAgICAwJSB7CiAgICAgIG9wYWNpdHk6IDA7CiAgICAgIG1hcmdpbi10b3A6IC0xMHB4OwogICAgfQogICAgMTAwJSB7CiAgICAgIG9wYWNpdHk6IDE7CiAgICAgIG1hcmdpbi10b3A6IDBweDsKICAgIH0KICB9ICovCjwvc3R5bGU+Cg==
      - name: updateEvent
        content: PHNjcmlwdCBsYW5nPSJ0cyI+DQogIGltcG9ydCBVcGRhdGVFdmVudCBmcm9tICIuLi9zZWN0aW9ucy9VcGRhdGUtT25lLVZpZXcuc3ZlbHRlIjsNCiAgaW1wb3J0IFNpbmdsZVZpZXcgZnJvbSAiLi4vc2VjdGlvbnMvU2luZ2xlLVZpZXcuc3ZlbHRlIjsNCg0KICBleHBvcnQgbGV0IGNsb3NlUG9wdXAgPSAoKSA9PiB7fTsNCiAgZXhwb3J0IGxldCBzY2hlbWE6IGFueSA9IHt9Ow0KICBleHBvcnQgbGV0IGlkOiBhbnkgPSAiIjsNCg0KICAvLyBjaGVjayBpZiB0aGUgc2NoZW1hIGlzIHZpZXcgb25seSBvciBlZGl0YWJsZQ0KICAvLyB0aGlzIGlzIGJhc2VkIG9uIHRoZSBjaGVja0lmVHJhaW5pbmdFZGl0YWJsZSBmdW5jdGlvbiBpbiB0aGUgc3JjL2NvbXBvbmVudHMvc2hhcmVkL2NhbGVuZGFyLnN2ZWx0ZSBmaWxlDQogIC8vIHdoaWNoIGNoZWNrcyBpZiB0aGUgdHJhaW5pbmcgcmFwcG9ydCBpcyBlZGl0YWJsZSBiYXNlZCBvbiB0aGUgaGlzdG9yeSBhbmQgdGhlIGRhdGUgb2YgdGhlIHRyYWluaW5nIGZvciB0aGUgdHJhaW5lcg0KICBleHBvcnQgbGV0IGlzVmlld09ubHkgPSBmYWxzZTsNCg0KICAvLyBjaGVjayBpZiB1c2VyIGlzIGEgdHJhaW5lcg0KICBjb25zdCBpc1VzZXJUcmFpbmVyID0gKCkgPT4gew0KICAgIC8vIFRPRE86IHNlbmQgYSByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kIHRvIHZlcmlmeSBpZiB0aGUgdG9rZW4gaXMgdmFsaWQNCiAgICByZXR1cm4gKA0KICAgICAgbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikgfHwgd2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcygidG9rZW4iKQ0KICAgICk7DQogIH07DQoNCiAgc2NoZW1hID0gew0KICAgIC4uLnNjaGVtYSwNCiAgICAiZmllbGQtcHJvcGVydGllcyI6IHsNCiAgICAgIC4uLnNjaGVtYVsiZmllbGQtcHJvcGVydGllcyJdLA0KICAgICAgImhpZGRlbi1maWVsZHMiOiBbImludm9pY2VkSW4iLCAiaW52b2ljZUpzb24iLCAiYXJjaGl2ZWQiXSwNCiAgICAgICJyZWFkb25seS1maWVsZHMiOiBpc1VzZXJUcmFpbmVyKCkgPyBbInRyYWluZXIiLCAiaWQiXSA6IFsiaWQiXSwNCiAgICAgICJmaWVsZC1vcmRlciI6IFsNCiAgICAgICAgImRhdHVtIiwNCiAgICAgICAgInN0YXJ0emVpdCIsDQogICAgICAgICJ0cmFpbmluZ3NkYXVlciIsDQogICAgICAgICJ0cmFpbmVyIiwNCiAgICAgICAgInBsYXR6IiwNCiAgICAgICAgInRyYWluaW5nVHlwZSIsDQogICAgICAgICJrdW5kZSIsDQogICAgICAgICJncnVwcGUiLA0KICAgICAgICAibm90aXplbiIsDQogICAgICAgICJuYWNoaG9sdGVybWluIiwNCiAgICAgICAgInByb2JldHJhaW5pbmciLA0KICAgICAgICAiYXJjaGl2ZWQiLA0KICAgICAgICAiaW52b2ljZWRJbiIsDQogICAgICAgICJpbnZvaWNlSnNvbiIsDQogICAgICBdLA0KICAgICAgImJvb2xlYW4tZmllbGRzIjogWyJwcm9iZXRyYWluaW5nIiwgIm5hY2hob2x0ZXJtaW4iLCAiYXJjaGl2ZWQiXSwNCiAgICAgICJyZWxhdGlvbmFsLWZpZWxkcyI6IFsNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICJrdW5kZUlkIiwNCiAgICAgICAgICB0eXBlOiAiRkFWT1JJVEUiLA0KICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLA0KICAgICAgICAgIGNvbHVtbnM6IFsNCiAgICAgICAgICAgICJiZXhpb0lkIiwNCiAgICAgICAgICAgICJuYW1lIiwNCiAgICAgICAgICAgICJ2b3JuYW1lIiwNCiAgICAgICAgICAgICJwbHoiLA0KICAgICAgICAgICAgIm9ydCIsDQogICAgICAgICAgICAibWFpbCIsDQogICAgICAgICAgICAic3RyYXNzZSIsDQogICAgICAgICAgICAibGFuZCIsDQogICAgICAgICAgICAiZ2VidXJ0c3RhZyIsDQogICAgICAgICAgICAibWFpbDIiLA0KICAgICAgICAgICAgInBob25lIiwNCiAgICAgICAgICAgICJwaG9uZTIiLA0KICAgICAgICAgICAgInBob25lTW9iaWxlIiwNCiAgICAgICAgICAgICJub3RpemVuIiwNCiAgICAgICAgICAgICJpZCIsDQogICAgICAgICAgXSwNCiAgICAgICAgfSwNCiAgICAgICAgew0KICAgICAgICAgIG5hbWU6ICJ0cmFpbmVyIiwNCiAgICAgICAgICBlZGl0YWJsZTogIWlzVXNlclRyYWluZXIoKSwNCiAgICAgICAgICAvLyBjb2x1bW5zOiBbImlkIiwgIm5hbWUiLCAidm9ybmFtZSIsICJlbWFpbCIsICJub3RpemVuIl0sDQogICAgICAgICAgY29sdW1uczogWyJpZCIsICJuYW1lIiwgInZvcm5hbWUiLCAiZW1haWwiXSwNCiAgICAgICAgfSwNCiAgICAgIF0sDQogICAgICAiY3VzdG9tLXZhbGlkYXRpb25zIjogaXNVc2VyVHJhaW5lcigpDQogICAgICAgID8gWw0KICAgICAgICAgICAgew0KICAgICAgICAgICAgICBmaWVsZDogInRyYWluaW5nc2RhdWVyIiwNCiAgICAgICAgICAgICAgdmFsaWRhdGlvbjogew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJUcmFpbmluZ3NkYXVlciBjYW4ndCBiZSBlbXB0eSIsDQogICAgICAgICAgICAgICAgcmVnZXg6ICIuKlxcUy4qIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgIGZpZWxkOiAidHJhaW5lciIsDQogICAgICAgICAgICAgIHZhbGlkYXRpb246IHsNCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAiVHJhaW5lciBjYW4ndCBiZSBlbXB0eSIsDQogICAgICAgICAgICAgICAgcmVnZXg6ICIuKlxcUy4qIiwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgXQ0KICAgICAgICA6IFsNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgZmllbGQ6ICJ0cmFpbmVyIiwNCiAgICAgICAgICAgICAgdmFsaWRhdGlvbjogew0KICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICJUcmFpbmVyIGNhbid0IGJlIGVtcHR5IiwNCiAgICAgICAgICAgICAgICByZWdleDogIi4qXFxTLioiLA0KICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICBdLA0KICAgIH0sDQogIH07DQo8L3NjcmlwdD4NCg0KPGRpdiBjbGFzcz0iYmctd2hpdGUgcC00IHctWzk1JV0gcm91bmRlZC1zbSI+DQogIDxkaXYgY2xhc3M9InRleHQtcmlnaHQgcGItNCI+DQogICAgPGJ1dHRvbg0KICAgICAgY2xhc3M9InRleHQtY2VudGVyIHB5LTMgcHgtNiBzaGFkb3ctc20gYm9yZGVyIGJvcmRlci1ncmF5LTIwMCBob3ZlcjpzaGFkb3ctbWQgdHJhbnNpdGlvbi1hbGwgZm9udC1zZW1pYm9sZCByb3VuZGVkLWZ1bGwgaC04IHctOCAhcC0wIHRleHQtbGciDQogICAgICBvbjpjbGljaz17Y2xvc2VQb3B1cH0NCiAgICA+DQogICAgICA8c3ZnDQogICAgICAgIHdpZHRoPSIyNCINCiAgICAgICAgaGVpZ2h0PSIyNCINCiAgICAgICAgdmlld0JveD0iMCAwIDI0IDI0Ig0KICAgICAgICBmaWxsPSJub25lIg0KICAgICAgICBzdHJva2U9ImN1cnJlbnRDb2xvciINCiAgICAgICAgc3Ryb2tlLXdpZHRoPSIyIg0KICAgICAgICBzdHJva2UtbGluZWNhcD0icm91bmQiDQogICAgICAgIHN0cm9rZS1saW5lam9pbj0icm91bmQiDQogICAgICAgIGNsYXNzPSJoLTUgdy01IGlubGluZS1ibG9jayINCiAgICAgICAgPjxsaW5lIHgxPSIxOCIgeTE9IjYiIHgyPSI2IiB5Mj0iMTgiIC8+PGxpbmUNCiAgICAgICAgICB4MT0iNiINCiAgICAgICAgICB5MT0iNiINCiAgICAgICAgICB4Mj0iMTgiDQogICAgICAgICAgeTI9IjE4Ig0KICAgICAgICAvPjwvc3ZnDQogICAgICA+DQogICAgPC9idXR0b24+DQogIDwvZGl2Pg0KICA8ZGl2IGNsYXNzPSJvdmVyZmxvdy1hdXRvIG1heC1oLVs3MCVdIj4NCiAgICB7I2lmICFpc1ZpZXdPbmx5fQ0KICAgICAgPFVwZGF0ZUV2ZW50DQogICAgICAgIG9uOnVwZGF0ZT17Y2xvc2VQb3B1cH0NCiAgICAgICAgb246ZGVsZXRlZD17Y2xvc2VQb3B1cH0NCiAgICAgICAgb3BlcmF0aW9uSWQ9IlJhcHBvcnRDb250cm9sbGVyLnVwZGF0ZUJ5SWQiDQogICAgICAgIHtpZH0NCiAgICAgICAge3NjaGVtYX0NCiAgICAgIC8+DQogICAgezplbHNlfQ0KICAgICAgPFNpbmdsZVZpZXcgb3BlcmF0aW9uSWQ9IlJhcHBvcnRDb250cm9sbGVyLmZpbmRCeUlkIiB7aWR9IHtzY2hlbWF9IC8+DQogICAgey9pZn0NCiAgPC9kaXY+DQo8L2Rpdj4NCg==
replicaCount: 1
image:
  repository: grpl/grapple-template-pr
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: "0.1.45.pr-33"
imagetest:
  repository: apptest
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart appVersion.
  tag: ""
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""
serviceAccount:
  # Specifies whether a service account should be created
  create: true
  # Annotations to add to the service account
  annotations: {}
  # The name of the service account to use.
  # If not set and create is true, a name is generated using the fullname template
  name: ""
podAnnotations: {}
podSecurityContext: {}
# fsGroup: 2000

securityContext: {}
# capabilities:
#   drop:
#   - ALL
# readOnlyRootFilesystem: true
# runAsNonRoot: true
# runAsUser: 1000

service:
  type: ClusterIP
  port: 80
ingress:
  enabled: true
  className: ""
  annotations: {}
  # kubernetes.io/ingress.class: nginx
  # kubernetes.io/tls-acme: "true"
  # hosts:
  #   - host: chart-example.local
  #     paths:
  #       - path: /
  #         pathType: ImplementationSpecific
  tls: []
  #  - secretName: chart-example-tls
  #    hosts:
  #      - chart-example.local
resources: {}
# We usually recommend not to specify default resources and to leave this as a conscious
# choice for the user. This also increases chances charts run on environments with little
# resources, such as Minikube. If you do want to specify resources, uncomment the following
# lines, adjust them as necessary, and remove the curly braces after 'resources:'.
# limits:
#   cpu: 100m
#   memory: 128Mi
# requests:
#   cpu: 100m
#   memory: 128Mi

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80
  # targetMemoryUtilizationPercentage: 80
nodeSelector: {}
tolerations: []
affinity: {}
